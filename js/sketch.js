// Generated by CoffeeScript 2.5.1
var SIZE, arr, fullScreen, released, resize;

import _ from 'https://cdn.skypack.dev/lodash';

import {
  ass,
  log,
  range,
  enterFullscreen
} from '../js/utils.js';

import {
  Board
} from '../js/board.js';

import {
  Button
} from '../js/button.js';

import {
  clickString,
  global
} from '../js/globals.js';

SIZE = global.SIZE;

released = true; // prevention of touch bounce

arr = null;

window.preload = () => {
  var i, j, len, len1, letter, ref, ref1, results;
  ref = "rnbqkp";
  for (i = 0, len = ref.length; i < len; i++) {
    letter = ref[i];
    global.pics[letter] = loadImage('./images/b' + letter + '.png');
  }
  ref1 = "RNBQKP";
  results = [];
  for (j = 0, len1 = ref1.length; j < len1; j++) {
    letter = ref1[j];
    results.push(global.pics[letter] = loadImage('./images/w' + letter.toLowerCase() + '.png'));
  }
  return results;
};

fullScreen = () => {
  //global.buttons = []
  return enterFullscreen();
};

window.setup = () => {
  createCanvas(innerWidth, innerHeight);
  global.SIZE = min(innerWidth, innerHeight);
  global.SIZE = round(innerHeight / 18);
  resize();
  textAlign(CENTER, CENTER);
  rectMode(CENTER);
  imageMode(CENTER);
  global.board = new Board(0);
  global.board2 = new Board(1);
  return global.chess = new Chess();
};

window.draw = () => {
  var button, i, len, ref;
  background('gray');
  textSize(SIZE);
  global.board.draw();
  global.board2.draw();
  ref = global.buttons;
  for (i = 0, len = ref.length; i < len; i++) {
    button = ref[i];
    button.draw();
  }
  fill("black");
  return textAlign(CENTER, CENTER);
};

window.onresize = function() {
  return resize();
};

resize = function() {
  global.SIZE = round(innerHeight / 18);
  resizeCanvas(innerWidth, innerHeight);
  global.mx = (innerWidth - 8 * global.SIZE) / 2;
  global.my = (innerHeight - 17 * global.SIZE) / 2;
  global.buttons = [];
  return global.buttons.push(new Button(width / 2, height / 2, 'Full Screen', fullScreen));
};

window.mousePressed = () => {
  var button, i, j, len, len1, ref, ref1, square;
  console.log('mousePressed');
  if (!released) {
    return;
  }
  released = false;
  ref = global.buttons.concat(global.buttons);
  for (i = 0, len = ref.length; i < len; i++) {
    button = ref[i];
    if (button.inside(mouseX, mouseY)) {
      button.onclick();
      return false;
    }
  }
  ref1 = global.board.squares.concat(global.board2.squares);
  for (j = 0, len1 = ref1.length; j < len1; j++) {
    square = ref1[j];
    if (square.inside(mouseX, mouseY)) {
      console.log('square.inside', square.nr);
      square.onclick();
      return false;
    }
  }
  return false;
};

window.mouseReleased = () => {
  released = true;
  return false;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsSUFBQSxFQUFBLEdBQUEsRUFBQSxVQUFBLEVBQUEsUUFBQSxFQUFBOztBQUFBLE9BQU8sQ0FBUCxNQUFBOztBQUNBLE9BQUE7RUFBUSxHQUFSO0VBQVksR0FBWjtFQUFnQixLQUFoQjtFQUFzQixlQUF0QjtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFRLEtBQVI7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUSxNQUFSO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVEsV0FBUjtFQUFvQixNQUFwQjtDQUFBLE1BQUE7O0FBRUEsSUFBQSxHQUFPLE1BQU0sQ0FBQzs7QUFDZCxRQUFBLEdBQVcsS0FQWDs7QUFRQSxHQUFBLEdBQU07O0FBRU4sTUFBTSxDQUFDLE9BQVAsR0FBaUIsQ0FBQSxDQUFBLEdBQUE7QUFDakIsTUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsTUFBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUE7QUFBQztFQUFBLEtBQUEscUNBQUE7O0lBQ0MsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFELENBQVgsR0FBc0IsU0FBQSxDQUFVLFlBQUEsR0FBZSxNQUFmLEdBQXdCLE1BQWxDO0VBRHZCO0FBRUE7QUFBQTtFQUFBLEtBQUEsd0NBQUE7O2lCQUNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBRCxDQUFYLEdBQXNCLFNBQUEsQ0FBVSxZQUFBLEdBQWUsTUFBTSxDQUFDLFdBQVAsQ0FBQSxDQUFmLEdBQXNDLE1BQWhEO0VBRHZCLENBQUE7O0FBSGdCOztBQU1qQixVQUFBLEdBQWEsQ0FBQSxDQUFBLEdBQUEsRUFBQTs7U0FFWixlQUFBLENBQUE7QUFGWTs7QUFJYixNQUFNLENBQUMsS0FBUCxHQUFlLENBQUEsQ0FBQSxHQUFBO0VBRWQsWUFBQSxDQUFhLFVBQWIsRUFBd0IsV0FBeEI7RUFFQSxNQUFNLENBQUMsSUFBUCxHQUFjLEdBQUEsQ0FBSSxVQUFKLEVBQWUsV0FBZjtFQUNkLE1BQU0sQ0FBQyxJQUFQLEdBQWMsS0FBQSxDQUFNLFdBQUEsR0FBWSxFQUFsQjtFQUVkLE1BQUEsQ0FBQTtFQUVBLFNBQUEsQ0FBVSxNQUFWLEVBQWlCLE1BQWpCO0VBQ0EsUUFBQSxDQUFTLE1BQVQ7RUFDQSxTQUFBLENBQVUsTUFBVjtFQUVBLE1BQU0sQ0FBQyxLQUFQLEdBQWUsSUFBSSxLQUFKLENBQVUsQ0FBVjtFQUNmLE1BQU0sQ0FBQyxNQUFQLEdBQWdCLElBQUksS0FBSixDQUFVLENBQVY7U0FDaEIsTUFBTSxDQUFDLEtBQVAsR0FBZSxJQUFJLEtBQUosQ0FBQTtBQWZEOztBQWlCZixNQUFNLENBQUMsSUFBUCxHQUFjLENBQUEsQ0FBQSxHQUFBO0FBQ2QsTUFBQSxNQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQTtFQUFDLFVBQUEsQ0FBVyxNQUFYO0VBQ0EsUUFBQSxDQUFTLElBQVQ7RUFDQSxNQUFNLENBQUMsS0FBSyxDQUFDLElBQWIsQ0FBQTtFQUNBLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBZCxDQUFBO0FBQ0E7RUFBQSxLQUFBLHFDQUFBOztJQUNDLE1BQU0sQ0FBQyxJQUFQLENBQUE7RUFERDtFQUVBLElBQUEsQ0FBSyxPQUFMO1NBQ0EsU0FBQSxDQUFVLE1BQVYsRUFBaUIsTUFBakI7QUFSYTs7QUFVZCxNQUFNLENBQUMsUUFBUCxHQUFrQixRQUFBLENBQUEsQ0FBQTtTQUFHLE1BQUEsQ0FBQTtBQUFIOztBQUVsQixNQUFBLEdBQVMsUUFBQSxDQUFBLENBQUE7RUFDUixNQUFNLENBQUMsSUFBUCxHQUFjLEtBQUEsQ0FBTSxXQUFBLEdBQVksRUFBbEI7RUFDZCxZQUFBLENBQWEsVUFBYixFQUF5QixXQUF6QjtFQUNBLE1BQU0sQ0FBQyxFQUFQLEdBQVksQ0FBQyxVQUFBLEdBQWEsQ0FBQSxHQUFJLE1BQU0sQ0FBQyxJQUF6QixDQUFBLEdBQStCO0VBQzNDLE1BQU0sQ0FBQyxFQUFQLEdBQVksQ0FBQyxXQUFBLEdBQWMsRUFBQSxHQUFLLE1BQU0sQ0FBQyxJQUEzQixDQUFBLEdBQWlDO0VBQzdDLE1BQU0sQ0FBQyxPQUFQLEdBQWlCO1NBQ2pCLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBZixDQUFvQixJQUFJLE1BQUosQ0FBVyxLQUFBLEdBQU0sQ0FBakIsRUFBbUIsTUFBQSxHQUFPLENBQTFCLEVBQTZCLGFBQTdCLEVBQTRDLFVBQTVDLENBQXBCO0FBTlE7O0FBUVQsTUFBTSxDQUFDLFlBQVAsR0FBc0IsQ0FBQSxDQUFBLEdBQUE7QUFDdEIsTUFBQSxNQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUE7RUFBQyxPQUFPLENBQUMsR0FBUixDQUFZLGNBQVo7RUFDQSxJQUFHLENBQUksUUFBUDtBQUFxQixXQUFyQjs7RUFDQSxRQUFBLEdBQVc7QUFFWDtFQUFBLEtBQUEscUNBQUE7O0lBQ0MsSUFBRyxNQUFNLENBQUMsTUFBUCxDQUFjLE1BQWQsRUFBcUIsTUFBckIsQ0FBSDtNQUNDLE1BQU0sQ0FBQyxPQUFQLENBQUE7QUFDQSxhQUFPLE1BRlI7O0VBREQ7QUFJQTtFQUFBLEtBQUEsd0NBQUE7O0lBQ0MsSUFBRyxNQUFNLENBQUMsTUFBUCxDQUFjLE1BQWQsRUFBcUIsTUFBckIsQ0FBSDtNQUNDLE9BQU8sQ0FBQyxHQUFSLENBQVksZUFBWixFQUE0QixNQUFNLENBQUMsRUFBbkM7TUFDQSxNQUFNLENBQUMsT0FBUCxDQUFBO0FBQ0EsYUFBTyxNQUhSOztFQUREO1NBS0E7QUFkcUI7O0FBZ0J0QixNQUFNLENBQUMsYUFBUCxHQUF1QixDQUFBLENBQUEsR0FBQTtFQUN0QixRQUFBLEdBQVc7U0FDWDtBQUZzQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2h0dHBzOi8vY2RuLnNreXBhY2suZGV2L2xvZGFzaCdcclxuaW1wb3J0IHthc3MsbG9nLHJhbmdlLGVudGVyRnVsbHNjcmVlbn0gZnJvbSAnLi4vanMvdXRpbHMuanMnXHJcbmltcG9ydCB7Qm9hcmR9IGZyb20gJy4uL2pzL2JvYXJkLmpzJ1xyXG5pbXBvcnQge0J1dHRvbn0gZnJvbSAnLi4vanMvYnV0dG9uLmpzJ1xyXG5pbXBvcnQge2NsaWNrU3RyaW5nLGdsb2JhbH0gZnJvbSAnLi4vanMvZ2xvYmFscy5qcydcclxuXHJcblNJWkUgPSBnbG9iYWwuU0laRVxyXG5yZWxlYXNlZCA9IHRydWUgIyBwcmV2ZW50aW9uIG9mIHRvdWNoIGJvdW5jZVxyXG5hcnIgPSBudWxsXHJcblxyXG53aW5kb3cucHJlbG9hZCA9ID0+XHJcblx0Zm9yIGxldHRlciBpbiBcInJuYnFrcFwiXHJcblx0XHRnbG9iYWwucGljc1tsZXR0ZXJdID0gbG9hZEltYWdlICcuL2ltYWdlcy9iJyArIGxldHRlciArICcucG5nJ1xyXG5cdGZvciBsZXR0ZXIgaW4gXCJSTkJRS1BcIlxyXG5cdFx0Z2xvYmFsLnBpY3NbbGV0dGVyXSA9IGxvYWRJbWFnZSAnLi9pbWFnZXMvdycgKyBsZXR0ZXIudG9Mb3dlckNhc2UoKSArICcucG5nJ1xyXG5cclxuZnVsbFNjcmVlbiA9ID0+XHJcblx0I2dsb2JhbC5idXR0b25zID0gW11cclxuXHRlbnRlckZ1bGxzY3JlZW4oKVxyXG5cclxud2luZG93LnNldHVwID0gPT5cclxuXHJcblx0Y3JlYXRlQ2FudmFzIGlubmVyV2lkdGgsaW5uZXJIZWlnaHRcclxuXHJcblx0Z2xvYmFsLlNJWkUgPSBtaW4gaW5uZXJXaWR0aCxpbm5lckhlaWdodFxyXG5cdGdsb2JhbC5TSVpFID0gcm91bmQgaW5uZXJIZWlnaHQvMThcclxuXHJcblx0cmVzaXplKClcclxuXHJcblx0dGV4dEFsaWduIENFTlRFUixDRU5URVJcclxuXHRyZWN0TW9kZSBDRU5URVJcclxuXHRpbWFnZU1vZGUgQ0VOVEVSXHJcblxyXG5cdGdsb2JhbC5ib2FyZCA9IG5ldyBCb2FyZCAwXHJcblx0Z2xvYmFsLmJvYXJkMiA9IG5ldyBCb2FyZCAxXHJcblx0Z2xvYmFsLmNoZXNzID0gbmV3IENoZXNzKClcclxuXHJcbndpbmRvdy5kcmF3ID0gPT5cclxuXHRiYWNrZ3JvdW5kICdncmF5J1xyXG5cdHRleHRTaXplIFNJWkVcclxuXHRnbG9iYWwuYm9hcmQuZHJhdygpXHJcblx0Z2xvYmFsLmJvYXJkMi5kcmF3KClcclxuXHRmb3IgYnV0dG9uIGluIGdsb2JhbC5idXR0b25zXHJcblx0XHRidXR0b24uZHJhdygpXHJcblx0ZmlsbCBcImJsYWNrXCJcclxuXHR0ZXh0QWxpZ24gQ0VOVEVSLENFTlRFUlxyXG5cclxud2luZG93Lm9ucmVzaXplID0gLT4gcmVzaXplKClcclxuXHJcbnJlc2l6ZSA9IC0+XHJcblx0Z2xvYmFsLlNJWkUgPSByb3VuZCBpbm5lckhlaWdodC8xOFxyXG5cdHJlc2l6ZUNhbnZhcyBpbm5lcldpZHRoLCBpbm5lckhlaWdodFxyXG5cdGdsb2JhbC5teCA9IChpbm5lcldpZHRoIC0gOCAqIGdsb2JhbC5TSVpFKS8yXHJcblx0Z2xvYmFsLm15ID0gKGlubmVySGVpZ2h0IC0gMTcgKiBnbG9iYWwuU0laRSkvMlxyXG5cdGdsb2JhbC5idXR0b25zID0gW11cclxuXHRnbG9iYWwuYnV0dG9ucy5wdXNoIG5ldyBCdXR0b24gd2lkdGgvMixoZWlnaHQvMiwgJ0Z1bGwgU2NyZWVuJywgZnVsbFNjcmVlblxyXG5cclxud2luZG93Lm1vdXNlUHJlc3NlZCA9ID0+XHJcblx0Y29uc29sZS5sb2cgJ21vdXNlUHJlc3NlZCdcclxuXHRpZiBub3QgcmVsZWFzZWQgdGhlbiByZXR1cm5cclxuXHRyZWxlYXNlZCA9IGZhbHNlXHJcblxyXG5cdGZvciBidXR0b24gaW4gZ2xvYmFsLmJ1dHRvbnMuY29uY2F0IGdsb2JhbC5idXR0b25zXHJcblx0XHRpZiBidXR0b24uaW5zaWRlIG1vdXNlWCxtb3VzZVlcclxuXHRcdFx0YnV0dG9uLm9uY2xpY2soKVxyXG5cdFx0XHRyZXR1cm4gZmFsc2VcclxuXHRmb3Igc3F1YXJlIGluIGdsb2JhbC5ib2FyZC5zcXVhcmVzLmNvbmNhdCBnbG9iYWwuYm9hcmQyLnNxdWFyZXNcclxuXHRcdGlmIHNxdWFyZS5pbnNpZGUgbW91c2VYLG1vdXNlWVxyXG5cdFx0XHRjb25zb2xlLmxvZyAnc3F1YXJlLmluc2lkZScsc3F1YXJlLm5yXHJcblx0XHRcdHNxdWFyZS5vbmNsaWNrKClcclxuXHRcdFx0cmV0dXJuIGZhbHNlXHJcblx0ZmFsc2VcclxuXHJcbndpbmRvdy5tb3VzZVJlbGVhc2VkID0gPT5cclxuXHRyZWxlYXNlZCA9IHRydWVcclxuXHRmYWxzZSJdfQ==
//# sourceURL=c:\github\2023-026-chessx2\coffee\sketch.coffee