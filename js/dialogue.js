// Generated by CoffeeScript 2.5.1
var Button, calcr1r2;

import {
  global
} from '../js/globals.js';

import {
  menu0
} from '../js/menus.js';

import _ from 'https://cdn.skypack.dev/lodash';

global.dialogues = [];

calcr1r2 = function(n, w, h) {
  var r1, r2, s;
  s = Math.min(w, h);
  r2 = s / 7;
  r1 = s / 3;
  if (n > 6) {
    r2 *= 7 / n;
  }
  return [Math.round(r1), Math.round(r2)];
};

// assert [200,86], calcr1r2 4,600,800
// assert [200,75], calcr1r2 8,600,800
export var Dialogue = class Dialogue {
  constructor(x = width / 2, y = height / 2) {
    this.x = x;
    this.y = y;
    this.col = '#ff06';
    this.buttons = [];
    global.dialogues.push(this);
  }

  add(prompt, event) {
    return this.buttons.push(new Button(this, prompt, event));
  }

  clock(title = ' ', backPop = false, turn = 0) {
    var button, chars, i, j, len, n, r1, r2, ref, v;
    this.backPop = backPop;
    n = this.buttons.length;
    [r1, r2] = calcr1r2(n, width, height);
    ref = this.buttons;
    for (i = j = 0, len = ref.length; j < len; i = ++j) {
      button = ref[i];
      v = i * 360 / n + turn - 90;
      button.x = r1 * cos(v);
      button.y = r1 * sin(v);
      button.r = r2;
    }
    button = new Button(this, title, function() {
      if (this.dlg.backPop) {
        return global.dialogues.pop();
      } else {
        return global.dialogues.clear();
      }
    });
    button.x = 0;
    button.y = 0;
    button.r = r2;
    this.buttons.push(button);
    chars = _.max((function() {
      var k, len1, ref1, results;
      ref1 = this.buttons;
      results = [];
      for (k = 0, len1 = ref1.length; k < len1; k++) {
        button = ref1[k];
        results.push(button.title.length);
      }
      return results;
    }).call(this));
    return this.textSize = chars === 1 ? 0.75 * r2 : 2.5 * r2 / chars;
  }

  update(delta) { // -1 eller +1
    var i, j, len, ref, ref1, results;
    if ((0 <= (ref = this.pageStart + delta * this.pageSize) && ref < this.lst.length)) {
      this.pageStart += delta * this.pageSize;
      ref1 = range(this.pageSize);
      results = [];
      for (j = 0, len = ref1.length; j < len; j++) {
        i = ref1[j];
        if (this.pageStart + i < this.lst.length) {
          results.push(this.buttons[i].arr = this.lst[this.pageStart + i]);
        } else {
          results.push(this.buttons[i].arr = []);
        }
      }
      return results;
    }
  }

  // list : (@lst, @pageSize=10, @backPop=true, click = (arr) -> print arr[0]) ->
  // 	@pageStart = 0
  // 	n = @pageSize
  // 	x = 0
  // 	w = width
  // 	h = height/(@pageSize+1)
  // 	@buttons.clear()
  // 	for i in range @pageStart,@pageStart + n
  // 		if i < @lst.length
  // 			item = @lst[i]
  // 			y = i*h
  // 			do (item) => @buttons.push new RectButton @, item, x,y,w,h, -> click @arr
  // 	@buttons.push new RectButton @, ['Prev'], 0*w/3,h*n, w/3,h, -> @dlg.update -1 
  // 	@buttons.push new RectButton @, ['Cancel'], 1*w/3,h*n, w/3,h, -> 
  // 		if @dlg.backPop then dialogues.pop() else dialogues.clear()
  // 	@buttons.push new RectButton @, ['Next'], 2*w/3,h*n, w/3,h, -> @dlg.update +1 
  show() {
    var button, j, len, ref;
    push();
    translate(this.x, this.y);
    textSize(this.textSize);
    ref = this.buttons;
    for (j = 0, len = ref.length; j < len; j++) {
      button = ref[j];
      button.show(this);
    }
    return pop();
  }

  execute(mx, my) {
    var button, j, len, ref;
    ref = this.buttons;
    for (j = 0, len = ref.length; j < len; j++) {
      button = ref[j];
      if (button.inside(mx, my, this)) {
        button.execute();
        return true;
      }
    }
    return false;
  }

};

Button = class Button {
  constructor(dlg, title1, event1 = function() {
      return print(this.txt);
    }) {
    this.dlg = dlg;
    this.title = title1;
    this.event = event1;
    this.active = true;
  }

  info(title1, event1) {
    this.title = title1;
    this.event = event1;
    return this.active = true;
  }

  show() {
    var arr;
    if (this.active) {
      fill(this.dlg.col);
    } else {
      fill("#fff8");
    }
    stroke(0);
    ellipse(this.x, this.y, 2 * this.r, 2 * this.r);
    push();
    if (this.active) {
      fill(0);
    } else {
      fill("#888");
    }
    noStroke();
    textAlign(CENTER, CENTER);
    textSize(this.dlg.textSize);
    arr = this.title.split(' ');
    if (arr.length === 1) {
      text(arr[0], this.x, this.y);
    } else {
      text(arr[0], this.x, this.y - 0.3 * this.r);
      text(arr[1], this.x, this.y + 0.3 * this.r);
    }
    return pop();
  }

  inside(mx, my) {
    return this.r > dist(mx, my, this.dlg.x + this.x, this.dlg.y + this.y);
  }

  execute() {
    
    //console.log "Button #{@title} #{@active}"
    if (this.active) {
      return this.event();
    }
  }

};

// class RectButton 
// 	constructor : (@dlg, @arr, @x, @y, @w, @h, @event = -> print @item) -> @active = true 
// 	info : (@arr,@event) -> @active = true
// 	show : ->
// 		col = '#ff0'

  // 		if @active then fill col else fill "#fff8"
// 		stroke 0
// 		rect @x,@y,@w,@h
// 		push()
// 		if @active then fill 0 else fill "#888"
// 		noStroke()
// 		textSize @dlg.textSize
// 		if @arr.length == 1
// 			textAlign CENTER,CENTER
// 			text @arr[0], @x+@w/2,@y+@h/2			
// 		if @arr.length == 2
// 			textAlign LEFT,CENTER
// 			text @arr[0], @x+10,@y+@h/2
// 			textAlign RIGHT,CENTER
// 			text @arr[1], @x+@w-10,@y+@h/2
// 		if @arr.length == 3
// 			textAlign LEFT,CENTER
// 			text @arr[0], @x+10,@y+@h/2
// 			textAlign CENTER,CENTER
// 			text @arr[1], @x+@w/2,@y+@h/2			
// 			textAlign RIGHT,CENTER
// 			text @arr[2], @x+@w-10,@y+@h/2
// 		else
// 		pop()

  // 	inside : (mx,my) ->  @x < mx < @x+@w and @y < my < @y+@h
// 	execute : -> if @active then @event()
export var MenuButton = class MenuButton {
  constructor(x, y) {
    this.x = x;
    this.y = y;
    this.d = (height + width) / 200;
    this.w = 4 * this.d;
    this.h = 4 * this.d;
  }

  draw() {
    noStroke();
    fill("black");
    rect(this.x, this.y - 1.5 * this.d, this.w, this.d * 0.8);
    rect(this.x, this.y + 0 * this.d, this.w, this.d * 0.8);
    return rect(this.x, this.y + 1.5 * this.d, this.w, this.d * 0.8);
  }

  inside(mx, my) {
    return (this.x - this.w / 2 < mx && mx < this.x + this.w / 2) && (this.y - this.h / 2 < my && my < this.y + this.h / 2);
  }

  onclick() {
    if (global.dialogues.length === 0) {
      return menu0(); // else dialogues.clear()
    }
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlhbG9ndWUuanMiLCJzb3VyY2VSb290IjoiLi4iLCJzb3VyY2VzIjpbImNvZmZlZVxcZGlhbG9ndWUuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBLE1BQUEsRUFBQTs7QUFBQSxPQUFBO0VBQVEsTUFBUjtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFRLEtBQVI7Q0FBQSxNQUFBOztBQUNBLE9BQU8sQ0FBUCxNQUFBOztBQUVBLE1BQU0sQ0FBQyxTQUFQLEdBQW1COztBQUVuQixRQUFBLEdBQVcsUUFBQSxDQUFDLENBQUQsRUFBRyxDQUFILEVBQUssQ0FBTCxDQUFBO0FBQ1gsTUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBO0VBQUMsQ0FBQSxHQUFJLElBQUksQ0FBQyxHQUFMLENBQVMsQ0FBVCxFQUFXLENBQVg7RUFDSixFQUFBLEdBQUssQ0FBQSxHQUFFO0VBQ1AsRUFBQSxHQUFLLENBQUEsR0FBRTtFQUNQLElBQUcsQ0FBQSxHQUFJLENBQVA7SUFBYyxFQUFBLElBQU0sQ0FBQSxHQUFFLEVBQXRCOztTQUNBLENBQUMsSUFBSSxDQUFDLEtBQUwsQ0FBVyxFQUFYLENBQUQsRUFBZ0IsSUFBSSxDQUFDLEtBQUwsQ0FBVyxFQUFYLENBQWhCO0FBTFUsRUFOWDs7OztBQWVBLE9BQUEsSUFBYSxXQUFOLE1BQUEsU0FBQTtFQUVOLFdBQWMsS0FBTSxLQUFBLEdBQU0sQ0FBWixNQUFvQixNQUFBLEdBQU8sQ0FBM0IsQ0FBQTtJQUFDLElBQUMsQ0FBQTtJQUFhLElBQUMsQ0FBQTtJQUM3QixJQUFDLENBQUEsR0FBRCxHQUFPO0lBQ1AsSUFBQyxDQUFBLE9BQUQsR0FBVztJQUNYLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBakIsQ0FBc0IsSUFBdEI7RUFIYTs7RUFLZCxHQUFNLENBQUMsTUFBRCxFQUFRLEtBQVIsQ0FBQTtXQUFrQixJQUFDLENBQUEsT0FBTyxDQUFDLElBQVQsQ0FBYyxJQUFJLE1BQUosQ0FBVyxJQUFYLEVBQWEsTUFBYixFQUFv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Q0FBQSxDQUFELEdBQUcsSUFBQyxDQUFBLENBQUQsR0FBRyxDQUFyQjtFQUF0Qzs7RUFDVCxPQUFVLENBQUEsQ0FBQTtJQUFHLElBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFqQixLQUEyQixDQUE5QjthQUFxQyxLQUFBLENBQUEsRUFBckM7O0VBQUg7O0FBWkoiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2dsb2JhbH0gZnJvbSAnLi4vanMvZ2xvYmFscy5qcydcclxuaW1wb3J0IHttZW51MH0gZnJvbSAnLi4vanMvbWVudXMuanMnXHJcbmltcG9ydCBfIGZyb20gJ2h0dHBzOi8vY2RuLnNreXBhY2suZGV2L2xvZGFzaCdcclxuXHJcbmdsb2JhbC5kaWFsb2d1ZXMgPSBbXVxyXG5cclxuY2FsY3IxcjIgPSAobix3LGgpIC0+XHJcblx0cyA9IE1hdGgubWluIHcsaFxyXG5cdHIyID0gcy83XHJcblx0cjEgPSBzLzNcclxuXHRpZiBuID4gNiB0aGVuIHIyICo9IDcvblxyXG5cdFtNYXRoLnJvdW5kKHIxKSxNYXRoLnJvdW5kKHIyKV1cclxuIyBhc3NlcnQgWzIwMCw4Nl0sIGNhbGNyMXIyIDQsNjAwLDgwMFxyXG4jIGFzc2VydCBbMjAwLDc1XSwgY2FsY3IxcjIgOCw2MDAsODAwXHJcblxyXG5leHBvcnQgY2xhc3MgRGlhbG9ndWVcclxuXHJcblx0Y29uc3RydWN0b3IgOiAoQHggPSB3aWR0aC8yLCBAeSA9IGhlaWdodC8yKSAtPlxyXG5cdFx0QGNvbCA9ICcjZmYwNidcclxuXHRcdEBidXR0b25zID0gW11cclxuXHRcdGdsb2JhbC5kaWFsb2d1ZXMucHVzaCBAXHJcblxyXG5cdGFkZCA6IChwcm9tcHQsZXZlbnQpIC0+IEBidXR0b25zLnB1c2ggbmV3IEJ1dHRvbiBALHByb21wdCxldmVudFxyXG5cclxuXHRjbG9jayA6ICh0aXRsZT0gJyAnLCBAYmFja1BvcD1mYWxzZSwgdHVybj0wKSAtPlxyXG5cdFx0biA9IEBidXR0b25zLmxlbmd0aFxyXG5cdFx0W3IxLHIyXSA9IGNhbGNyMXIyIG4sd2lkdGgsaGVpZ2h0XHJcblx0XHRmb3IgYnV0dG9uLGkgaW4gQGJ1dHRvbnNcclxuXHRcdFx0diA9IGkqMzYwL24gKyB0dXJuIC0gOTBcclxuXHRcdFx0YnV0dG9uLnggPSByMSpjb3MgdlxyXG5cdFx0XHRidXR0b24ueSA9IHIxKnNpbiB2XHJcblx0XHRcdGJ1dHRvbi5yID0gcjJcclxuXHRcdGJ1dHRvbiA9IG5ldyBCdXR0b24gQCwgdGl0bGUsIC0+IFxyXG5cdFx0XHRpZiBAZGxnLmJhY2tQb3AgdGhlbiBnbG9iYWwuZGlhbG9ndWVzLnBvcCgpIGVsc2UgZ2xvYmFsLmRpYWxvZ3Vlcy5jbGVhcigpXHJcblx0XHRidXR0b24ueCA9IDBcclxuXHRcdGJ1dHRvbi55ID0gMFxyXG5cdFx0YnV0dG9uLnIgPSByMlxyXG5cdFx0QGJ1dHRvbnMucHVzaCBidXR0b25cclxuXHRcdGNoYXJzID0gXy5tYXggKGJ1dHRvbi50aXRsZS5sZW5ndGggZm9yIGJ1dHRvbiBpbiBAYnV0dG9ucylcclxuXHRcdEB0ZXh0U2l6ZSA9IGlmIGNoYXJzID09IDEgdGhlbiAwLjc1KnIyIGVsc2UgMi41KnIyL2NoYXJzXHJcblxyXG5cdHVwZGF0ZSA6IChkZWx0YSkgLT4gIyAtMSBlbGxlciArMVxyXG5cdFx0aWYgMCA8PSBAcGFnZVN0YXJ0ICsgZGVsdGEgKiBAcGFnZVNpemUgPCBAbHN0Lmxlbmd0aFxyXG5cdFx0XHRAcGFnZVN0YXJ0ICs9IGRlbHRhICogQHBhZ2VTaXplXHJcblx0XHRcdGZvciBpIGluIHJhbmdlIEBwYWdlU2l6ZVxyXG5cdFx0XHRcdGlmIEBwYWdlU3RhcnQgKyBpIDwgQGxzdC5sZW5ndGhcclxuXHRcdFx0XHRcdEBidXR0b25zW2ldLmFyciA9IEBsc3RbQHBhZ2VTdGFydCArIGldIFxyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdEBidXR0b25zW2ldLmFyciA9IFtdXHJcblxyXG5cdCMgbGlzdCA6IChAbHN0LCBAcGFnZVNpemU9MTAsIEBiYWNrUG9wPXRydWUsIGNsaWNrID0gKGFycikgLT4gcHJpbnQgYXJyWzBdKSAtPlxyXG5cdCMgXHRAcGFnZVN0YXJ0ID0gMFxyXG5cdCMgXHRuID0gQHBhZ2VTaXplXHJcblx0IyBcdHggPSAwXHJcblx0IyBcdHcgPSB3aWR0aFxyXG5cdCMgXHRoID0gaGVpZ2h0LyhAcGFnZVNpemUrMSlcclxuXHQjIFx0QGJ1dHRvbnMuY2xlYXIoKVxyXG5cdCMgXHRmb3IgaSBpbiByYW5nZSBAcGFnZVN0YXJ0LEBwYWdlU3RhcnQgKyBuXHJcblx0IyBcdFx0aWYgaSA8IEBsc3QubGVuZ3RoXHJcblx0IyBcdFx0XHRpdGVtID0gQGxzdFtpXVxyXG5cdCMgXHRcdFx0eSA9IGkqaFxyXG5cdCMgXHRcdFx0ZG8gKGl0ZW0pID0+IEBidXR0b25zLnB1c2ggbmV3IFJlY3RCdXR0b24gQCwgaXRlbSwgeCx5LHcsaCwgLT4gY2xpY2sgQGFyclxyXG5cdCMgXHRAYnV0dG9ucy5wdXNoIG5ldyBSZWN0QnV0dG9uIEAsIFsnUHJldiddLCAwKncvMyxoKm4sIHcvMyxoLCAtPiBAZGxnLnVwZGF0ZSAtMSBcclxuXHQjIFx0QGJ1dHRvbnMucHVzaCBuZXcgUmVjdEJ1dHRvbiBALCBbJ0NhbmNlbCddLCAxKncvMyxoKm4sIHcvMyxoLCAtPiBcclxuXHQjIFx0XHRpZiBAZGxnLmJhY2tQb3AgdGhlbiBkaWFsb2d1ZXMucG9wKCkgZWxzZSBkaWFsb2d1ZXMuY2xlYXIoKVxyXG5cdCMgXHRAYnV0dG9ucy5wdXNoIG5ldyBSZWN0QnV0dG9uIEAsIFsnTmV4dCddLCAyKncvMyxoKm4sIHcvMyxoLCAtPiBAZGxnLnVwZGF0ZSArMSBcclxuXHJcblx0c2hvdyA6IC0+XHJcblx0XHRwdXNoKClcclxuXHRcdHRyYW5zbGF0ZSBAeCxAeVxyXG5cdFx0dGV4dFNpemUgQHRleHRTaXplXHJcblx0XHRmb3IgYnV0dG9uIGluIEBidXR0b25zXHJcblx0XHRcdGJ1dHRvbi5zaG93IEBcclxuXHRcdHBvcCgpXHJcblxyXG5cdGV4ZWN1dGUgOiAobXgsbXkpIC0+XHJcblx0XHRmb3IgYnV0dG9uIGluIEBidXR0b25zXHJcblx0XHRcdGlmIGJ1dHRvbi5pbnNpZGUgbXgsbXksQFxyXG5cdFx0XHRcdGJ1dHRvbi5leGVjdXRlKClcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZVxyXG5cdFx0ZmFsc2UgXHJcblxyXG5jbGFzcyBCdXR0b24gXHJcblx0Y29uc3RydWN0b3IgOiAoQGRsZywgQHRpdGxlLCBAZXZlbnQgPSAtPiBwcmludCBAdHh0KSAtPiBAYWN0aXZlID0gdHJ1ZSBcclxuXHRpbmZvIDogKEB0aXRsZSxAZXZlbnQpIC0+IEBhY3RpdmUgPSB0cnVlXHJcblx0c2hvdyA6IC0+XHJcblx0XHRpZiBAYWN0aXZlIHRoZW4gZmlsbCBAZGxnLmNvbCBlbHNlIGZpbGwgXCIjZmZmOFwiXHJcblx0XHRzdHJva2UgMFxyXG5cdFx0ZWxsaXBzZSBAeCxAeSwyKkByLDIqQHJcclxuXHRcdHB1c2goKVxyXG5cdFx0aWYgQGFjdGl2ZSB0aGVuIGZpbGwgMCBlbHNlIGZpbGwgXCIjODg4XCJcclxuXHRcdG5vU3Ryb2tlKClcclxuXHRcdHRleHRBbGlnbiBDRU5URVIsQ0VOVEVSXHJcblx0XHR0ZXh0U2l6ZSBAZGxnLnRleHRTaXplXHJcblx0XHRhcnIgPSBAdGl0bGUuc3BsaXQgJyAnXHJcblx0XHRpZiBhcnIubGVuZ3RoID09IDEgXHJcblx0XHRcdHRleHQgYXJyWzBdLCBAeCxAeVxyXG5cdFx0ZWxzZSBcclxuXHRcdFx0dGV4dCBhcnJbMF0sIEB4LEB5LTAuMypAclxyXG5cdFx0XHR0ZXh0IGFyclsxXSwgQHgsQHkrMC4zKkByXHJcblx0XHRwb3AoKVxyXG5cclxuXHRpbnNpZGUgOiAobXgsbXkpIC0+ICBAciA+IGRpc3QgbXgsIG15LCBAZGxnLnggKyBAeCwgQGRsZy55ICsgQHkgXHJcblx0ZXhlY3V0ZSA6IC0+IFxyXG5cdFx0I2NvbnNvbGUubG9nIFwiQnV0dG9uICN7QHRpdGxlfSAje0BhY3RpdmV9XCJcclxuXHRcdGlmIEBhY3RpdmUgdGhlbiBAZXZlbnQoKVxyXG5cclxuIyBjbGFzcyBSZWN0QnV0dG9uIFxyXG4jIFx0Y29uc3RydWN0b3IgOiAoQGRsZywgQGFyciwgQHgsIEB5LCBAdywgQGgsIEBldmVudCA9IC0+IHByaW50IEBpdGVtKSAtPiBAYWN0aXZlID0gdHJ1ZSBcclxuIyBcdGluZm8gOiAoQGFycixAZXZlbnQpIC0+IEBhY3RpdmUgPSB0cnVlXHJcbiMgXHRzaG93IDogLT5cclxuIyBcdFx0Y29sID0gJyNmZjAnXHJcblxyXG4jIFx0XHRpZiBAYWN0aXZlIHRoZW4gZmlsbCBjb2wgZWxzZSBmaWxsIFwiI2ZmZjhcIlxyXG4jIFx0XHRzdHJva2UgMFxyXG4jIFx0XHRyZWN0IEB4LEB5LEB3LEBoXHJcbiMgXHRcdHB1c2goKVxyXG4jIFx0XHRpZiBAYWN0aXZlIHRoZW4gZmlsbCAwIGVsc2UgZmlsbCBcIiM4ODhcIlxyXG4jIFx0XHRub1N0cm9rZSgpXHJcbiMgXHRcdHRleHRTaXplIEBkbGcudGV4dFNpemVcclxuIyBcdFx0aWYgQGFyci5sZW5ndGggPT0gMVxyXG4jIFx0XHRcdHRleHRBbGlnbiBDRU5URVIsQ0VOVEVSXHJcbiMgXHRcdFx0dGV4dCBAYXJyWzBdLCBAeCtAdy8yLEB5K0BoLzJcdFx0XHRcclxuIyBcdFx0aWYgQGFyci5sZW5ndGggPT0gMlxyXG4jIFx0XHRcdHRleHRBbGlnbiBMRUZULENFTlRFUlxyXG4jIFx0XHRcdHRleHQgQGFyclswXSwgQHgrMTAsQHkrQGgvMlxyXG4jIFx0XHRcdHRleHRBbGlnbiBSSUdIVCxDRU5URVJcclxuIyBcdFx0XHR0ZXh0IEBhcnJbMV0sIEB4K0B3LTEwLEB5K0BoLzJcclxuIyBcdFx0aWYgQGFyci5sZW5ndGggPT0gM1xyXG4jIFx0XHRcdHRleHRBbGlnbiBMRUZULENFTlRFUlxyXG4jIFx0XHRcdHRleHQgQGFyclswXSwgQHgrMTAsQHkrQGgvMlxyXG4jIFx0XHRcdHRleHRBbGlnbiBDRU5URVIsQ0VOVEVSXHJcbiMgXHRcdFx0dGV4dCBAYXJyWzFdLCBAeCtAdy8yLEB5K0BoLzJcdFx0XHRcclxuIyBcdFx0XHR0ZXh0QWxpZ24gUklHSFQsQ0VOVEVSXHJcbiMgXHRcdFx0dGV4dCBAYXJyWzJdLCBAeCtAdy0xMCxAeStAaC8yXHJcbiMgXHRcdGVsc2VcclxuIyBcdFx0cG9wKClcclxuXHJcbiMgXHRpbnNpZGUgOiAobXgsbXkpIC0+ICBAeCA8IG14IDwgQHgrQHcgYW5kIEB5IDwgbXkgPCBAeStAaFxyXG4jIFx0ZXhlY3V0ZSA6IC0+IGlmIEBhY3RpdmUgdGhlbiBAZXZlbnQoKVxyXG5cclxuZXhwb3J0IGNsYXNzIE1lbnVCdXR0b25cclxuXHRjb25zdHJ1Y3RvciA6IChAeCxAeSkgLT5cclxuXHRcdEBkID0gKGhlaWdodCt3aWR0aCkvMjAwXHJcblx0XHRAdyA9IDQqQGRcclxuXHRcdEBoID0gNCpAZFxyXG5cdGRyYXcgOiAtPlxyXG5cdFx0bm9TdHJva2UoKVxyXG5cdFx0ZmlsbCBcImJsYWNrXCJcclxuXHRcdHJlY3QgQHgsQHktMS41KkBkLCBAdywgQGQqMC44XHJcblx0XHRyZWN0IEB4LEB5KzAqQGQsICAgQHcsIEBkKjAuOFxyXG5cdFx0cmVjdCBAeCxAeSsxLjUqQGQsIEB3LCBAZCowLjhcclxuXHRpbnNpZGUgOiAobXgsbXkpIC0+IEB4LUB3LzIgPCBteCA8IEB4K0B3LzIgYW5kIEB5LUBoLzIgPCBteSA8IEB5K0BoLzJcclxuXHRvbmNsaWNrIDogLT4gaWYgZ2xvYmFsLmRpYWxvZ3Vlcy5sZW5ndGggPT0gMCB0aGVuIG1lbnUwKCkgIyBlbHNlIGRpYWxvZ3Vlcy5jbGVhcigpXHJcbiJdfQ==
//# sourceURL=c:\github\2023-026-chessx2\coffee\dialogue.coffee