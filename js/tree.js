// Generated by CoffeeScript 2.5.1
var SIZE;

import {
  ass,
  log,
  range,
  spaceShip
} from '../js/utils.js';

import {
  global
} from '../js/globals.js';

import _ from 'https://cdn.skypack.dev/lodash';

SIZE = 2;

export var Tree = class Tree {
  constructor(arr) {
    this.getPath = this.getPath.bind(this);
    this.getStart = this.getStart.bind(this);
    this.getStopp = this.getStopp.bind(this);
    this.getQuestions = this.getQuestions.bind(this);
    // sök igenom hela arr[start:stopp] efter alla rader med rätt level och sortera
    // Avbryt om vi hamnar utanför det aktuella trädet.
    this.getAnswers = this.getAnswers.bind(this);
    this.test = this.test.bind(this);
    this.arr = arr;
  }

  getPath(i) {
    var res;
    res = [];
    while (true) {
      res.push(this.arr[i][0]);
      if (this.arr[i][2] === 0) {
        break;
      }
      i = i - this.arr[i][2];
    }
    return _.reverse(res).join('.');
  }

  getStart(path) {
    var i, j, k, key, keys, len, ref;
    keys = path.split('.');
    j = 0;
    ref = range(keys.length);
    for (k = 0, len = ref.length; k < len; k++) {
      i = ref[k];
      key = keys[i];
      while (this.arr[j][0] !== key || this.arr[j][1] !== i) {
        j += 1;
        if (j >= this.arr.length) {
          return -1;
        }
      }
    }
    return j;
  }

  getStopp(path, index) {
    var j, keys;
    keys = path.split('.');
    j = index + 1;
    while (this.arr[j][1] >= keys.length) {
      j += 1;
    }
    return j;
  }

  getQuestions(start, stopp) {
    var res;
    res = _.map(range(start, stopp), (i) => {
      return [this.arr[i][3], this.getPath(i), i];
    });
    res.sort((a, b) => {
      return spaceShip(b[0], a[0]) || spaceShip(a[1], b[1]);
    });
    return _.map(res, (item) => {
      return item[2];
    });
  }

  getAnswers(i, stopp) {
    var item, k, l, len, len1, level, ref, res, result;
    level = this.arr[i][1];
    res = [];
    ref = this.arr.slice(i + 1, stopp);
    for (k = 0, len = ref.length; k < len; k++) {
      item = ref[k];
      if (item[1] <= level) {
        break;
      }
      if (item[1] === level + 1) {
        res.push(item);
      }
    }
    res.sort((a, b) => {
      return spaceShip(b[3], a[3]);
    });
    result = [res[0][0]];
    for (i = l = 0, len1 = res.length; l < len1; i = ++l) {
      item = res[i];
      // console.log item,i
      if (i === 0) {
        continue;
      }
      if (res[i][3] / res[i - 1][3] >= 0.8) {
        result.push(item[0]);
      } else {
        break;
      }
    }
    // console.log 'result',result
    return result;
  }

  test() {
    var questions;
    if (SIZE === 0) {
      ass("d2d4", this.getPath(0));
      ass("d2d4.g8f6", this.getPath(1));
      ass("g2g3.d7d5.f1g2", this.getPath(60));
      ass(22, this.getStart("e2e4"));
      ass(32, this.getStart("e2e4.e7e5"));
      ass(-1, this.getStart("e2e4.e7e5.g1f3.b8c6.f1c4"));
      ass(42, this.getStopp("e2e4", 22));
      ass(34, this.getStopp("e2e4.e7e5", 32));
    }
    // questions = getQuestions 32,34

    // ass [9, 'e2e4.e7e5'], questions[0]
    // ass [6, 'e2e4.e7e5.g1f3'], questions[1]

    // ass getAnswers(22,42), [['c7c5', 1, 1, 14], ['g7g6', 1, 15, 13], ['d7d5', 1, 3, 9], ['e7e5', 1, 10, 9], ['c7c6', 1, 12, 6]]
    // ass getAnswers(32,34), [['g1f3', 2, 1, 6]]
    if (SIZE === 1) {
      ass("d2d4", this.getPath(0));
      ass("d2d4.d7d5", this.getPath(1));
      ass("e2e4.e7e5.g1f3.b8c6.f1c4", this.getPath(2557));
      ass("e2e4.e7e5.g1f3.b8c6.f1c4.f8c5.b2b4.c5b4.c2c3.b4e7.d2d4.c6a5", this.getPath(2611));
      ass("e2e4.e7e5.g1f3.b8c6.d2d4", this.getPath(2612));
      ass("c2c3", this.getPath(global.arr.length - 1));
      ass(2557, this.getStart("e2e4.e7e5.g1f3.b8c6.f1c4"));
      ass(2612, this.getStopp("e2e4.e7e5.g1f3.b8c6.f1c4", 2557));
    }
    // questions = getQuestions 2557,2612
    // ass [134, 'e2e4.e7e5.g1f3.b8c6.f1c4'], questions[0] 
    // ass [5, 'e2e4.e7e5.g1f3.b8c6.f1c4.g8f6.e1g1.f8e7'], _.last questions
    // ass getAnswers(2557,2612), [['g8f6', 5, 1, 60], ['f8c5', 5, 29, 60]]
    if (SIZE === 2) {
      ass("e2e4.c7c5.g1f3.e7e6.d2d4.c5d4.f3d4.a7a6.f1d3.d8c7.e1g1.b8c6.d4c6.d7c6.b1d2", this.getPath(100));
      ass("e2e4.d7d5.e4d5.g8f6.g1f3.f6d5", this.getPath(10000));
      ass(4585, this.getStart("e2e4.e7e5.g1f3.b8c6.f1c4"));
      ass(4900, this.getStopp("e2e4.e7e5.g1f3.b8c6.f1c4", 4585));
      questions = this.getQuestions(4585, 4900);
      ass(4840, questions[15]);
      ass(4841, questions[16]);
      ass(this.getAnswers(4585, 4900), [['g8f6', 5, 146, 529], ['f8c5', 5, 1, 454], ['f8e7', 5, 305, 19], ['g7g6', 5, 312, 12], ['f7f5', 5, 311, 8], ['d7d6', 5, 313, 8], ['a7a6', 5, 310, 5]]);
      ass(this.getAnswers(4731, 4900), [['d2d3', 6, 1, 358], ['f3g5', 6, 108, 95], ['d2d4', 6, 85, 33], ['e1g1', 6, 154, 22], ['b1c3', 6, 145, 11], ['c2c3', 6, 158, 8]]);
    }
    return console.log('testTree done.');
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJlZS5qcyIsInNvdXJjZVJvb3QiOiIuLiIsInNvdXJjZXMiOlsiY29mZmVlXFx0cmVlLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBQTs7QUFBQSxPQUFBO0VBQVEsR0FBUjtFQUFZLEdBQVo7RUFBZ0IsS0FBaEI7RUFBc0IsU0FBdEI7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUSxNQUFSO0NBQUEsTUFBQTs7QUFDQSxPQUFPLENBQVAsTUFBQTs7QUFFQSxJQUFBLEdBQU87O0FBRVAsT0FBQSxJQUFhLE9BQU4sTUFBQSxLQUFBO0VBQ04sV0FBYyxJQUFBLENBQUE7UUFFZCxDQUFBLGNBQUEsQ0FBQTtRQVFBLENBQUEsZUFBQSxDQUFBO1FBVUEsQ0FBQSxlQUFBLENBQUE7UUFPQSxDQUFBLG1CQUFBLENBQUEsd0JBM0J1Qjs7O1FBa0N2QixDQUFBLGlCQUFBLENBQUE7UUFpQkEsQ0FBQSxXQUFBLENBQUE7SUFuRGUsSUFBQyxDQUFBO0VBQUY7O0VBRWQsT0FBVSxDQUFDLENBQUQsQ0FBQTtBQUNYLFFBQUE7SUFBRSxHQUFBLEdBQU07QUFDTixXQUFNLElBQU47TUFDQyxHQUFHLENBQUMsSUFBSixDQUFTLElBQUMsQ0FBQSxHQUFHLENBQUMsQ0FBRCxDQUFHLENBQUMsQ0FBRCxDQUFoQjtNQUNBLElBQUcsSUFBQyxDQUFBLEdBQUcsQ0FBQyxDQUFELENBQUcsQ0FBQyxDQUFELENBQVAsS0FBYyxDQUFqQjtBQUF3QixjQUF4Qjs7TUFDQSxDQUFBLEdBQUksQ0FBQSxHQUFJLElBQUMsQ0FBQSxHQUFHLENBQUMsQ0FBRCxDQUFHLENBQUMsQ0FBRDtJQUhoQjtXQUlBLENBQUMsQ0FBQyxPQUFGLENBQVUsR0FBVixDQUFjLENBQUMsSUFBZixDQUFvQixHQUFwQjtFQU5TOztFQVFWLFFBQVcsQ0FBQyxJQUFELENBQUE7QUFDWixRQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBO0lBQUUsSUFBQSxHQUFPLElBQUksQ0FBQyxLQUFMLENBQVcsR0FBWDtJQUNQLENBQUEsR0FBSTtBQUNKO0lBQUEsS0FBQSxxQ0FBQTs7TUFDQyxHQUFBLEdBQU0sSUFBSSxDQUFDLENBQUQ7QUFDVixhQUFNLElBQUMsQ0FBQSxHQUFHLENBQUMsQ0FBRCxDQUFHLENBQUMsQ0FBRCxDQUFQLEtBQWMsR0FBZCxJQUFxQixJQUFDLENBQUEsR0FBRyxDQUFDLENBQUQsQ0FBRyxDQUFDLENBQUQsQ0FBUCxLQUFjLENBQXpDO1FBQ0MsQ0FBQSxJQUFLO1FBQ0wsSUFBRyxDQUFBLElBQUcsSUFBQyxDQUFBLEdBQUcsQ0FBQyxNQUFYO0FBQXVCLGlCQUFPLENBQUMsRUFBL0I7O01BRkQ7SUFGRDtXQUtBO0VBUlU7O0VBVVgsUUFBVyxDQUFDLElBQUQsRUFBTSxLQUFOLENBQUE7QUFDWixRQUFBLENBQUEsRUFBQTtJQUFFLElBQUEsR0FBTyxJQUFJLENBQUMsS0FBTCxDQUFXLEdBQVg7SUFDUCxDQUFBLEdBQUksS0FBQSxHQUFRO0FBQ1osV0FBTSxJQUFDLENBQUEsR0FBRyxDQUFDLENBQUQsQ0FBRyxDQUFDLENBQUQsQ0FBUCxJQUFjLElBQUksQ0FBQyxNQUF6QjtNQUNDLENBQUEsSUFBSztJQUROO1dBRUE7RUFMVTs7RUFPWCxZQUFlLENBQUMsS0FBRCxFQUFPLEtBQVAsQ0FBQTtBQUNoQixRQUFBO0lBQUUsR0FBQSxHQUFNLENBQUMsQ0FBQyxHQUFGLENBQU0sS0FBQSxDQUFNLEtBQU4sRUFBWSxLQUFaLENBQU4sRUFBMEIsQ0FBQyxDQUFELENBQUEsR0FBQTthQUFPLENBQUMsSUFBQyxDQUFBLEdBQUcsQ0FBQyxDQUFELENBQUcsQ0FBQyxDQUFELENBQVIsRUFBYSxJQUFDLENBQUEsT0FBRCxDQUFTLENBQVQsQ0FBYixFQUEwQixDQUExQjtJQUFQLENBQTFCO0lBQ04sR0FBRyxDQUFDLElBQUosQ0FBUyxDQUFDLENBQUQsRUFBRyxDQUFILENBQUEsR0FBQTthQUFTLFNBQUEsQ0FBVSxDQUFDLENBQUMsQ0FBRCxDQUFYLEVBQWUsQ0FBQyxDQUFDLENBQUQsQ0FBaEIsQ0FBQSxJQUF3QixTQUFBLENBQVUsQ0FBQyxDQUFDLENBQUQsQ0FBWCxFQUFlLENBQUMsQ0FBQyxDQUFELENBQWhCO0lBQWpDLENBQVQ7V0FDQSxDQUFDLENBQUMsR0FBRixDQUFNLEdBQU4sRUFBVyxDQUFDLElBQUQsQ0FBQSxHQUFBO2FBQVUsSUFBSSxDQUFDLENBQUQ7SUFBZCxDQUFYO0VBSGM7O0VBT2YsVUFBYSxDQUFDLENBQUQsRUFBRyxLQUFILENBQUE7QUFDZCxRQUFBLElBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUE7SUFBRSxLQUFBLEdBQVEsSUFBQyxDQUFBLEdBQUcsQ0FBQyxDQUFELENBQUcsQ0FBQyxDQUFEO0lBQ2YsR0FBQSxHQUFNO0FBQ047SUFBQSxLQUFBLHFDQUFBOztNQUNDLElBQUcsSUFBSSxDQUFDLENBQUQsQ0FBSixJQUFXLEtBQWQ7QUFBeUIsY0FBekI7O01BQ0EsSUFBRyxJQUFJLENBQUMsQ0FBRCxDQUFKLEtBQVcsS0FBQSxHQUFNLENBQXBCO1FBQTJCLEdBQUcsQ0FBQyxJQUFKLENBQVMsSUFBVCxFQUEzQjs7SUFGRDtJQUdBLEdBQUcsQ0FBQyxJQUFKLENBQVMsQ0FBQyxDQUFELEVBQUcsQ0FBSCxDQUFBLEdBQUE7YUFBUyxTQUFBLENBQVUsQ0FBQyxDQUFDLENBQUQsQ0FBWCxFQUFnQixDQUFDLENBQUMsQ0FBRCxDQUFqQjtJQUFULENBQVQ7SUFDQSxNQUFBLEdBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBRCxDQUFHLENBQUMsQ0FBRCxDQUFQO0lBQ1QsS0FBQSwrQ0FBQTtvQkFBQTs7TUFFQyxJQUFHLENBQUEsS0FBRyxDQUFOO0FBQWEsaUJBQWI7O01BQ0EsSUFBRyxHQUFHLENBQUMsQ0FBRCxDQUFHLENBQUMsQ0FBRCxDQUFOLEdBQVksR0FBRyxDQUFDLENBQUEsR0FBRSxDQUFILENBQUssQ0FBQyxDQUFELENBQXBCLElBQTJCLEdBQTlCO1FBQ0MsTUFBTSxDQUFDLElBQVAsQ0FBWSxJQUFJLENBQUMsQ0FBRCxDQUFoQixFQUREO09BQUEsTUFBQTtBQUVLLGNBRkw7O0lBSEQsQ0FQRjs7V0FjRTtFQWZZOztFQWlCYixJQUFPLENBQUEsQ0FBQTtBQUVSLFFBQUE7SUFBRSxJQUFHLElBQUEsS0FBUSxDQUFYO01BQ0MsR0FBQSxDQUFJLE1BQUosRUFBWSxJQUFDLENBQUEsT0FBRCxDQUFTLENBQVQsQ0FBWjtNQUNBLEdBQUEsQ0FBSSxXQUFKLEVBQWlCLElBQUMsQ0FBQSxPQUFELENBQVMsQ0FBVCxDQUFqQjtNQUNBLEdBQUEsQ0FBSSxnQkFBSixFQUFzQixJQUFDLENBQUEsT0FBRCxDQUFTLEVBQVQsQ0FBdEI7TUFFQSxHQUFBLENBQUksRUFBSixFQUFRLElBQUMsQ0FBQSxRQUFELENBQVUsTUFBVixDQUFSO01BQ0EsR0FBQSxDQUFJLEVBQUosRUFBUSxJQUFDLENBQUEsUUFBRCxDQUFVLFdBQVYsQ0FBUjtNQUNBLEdBQUEsQ0FBSSxDQUFDLENBQUwsRUFBUSxJQUFDLENBQUEsUUFBRCxDQUFVLDBCQUFWLENBQVI7TUFFQSxHQUFBLENBQUksRUFBSixFQUFRLElBQUMsQ0FBQSxRQUFELENBQVUsTUFBVixFQUFpQixFQUFqQixDQUFSO01BQ0EsR0FBQSxDQUFJLEVBQUosRUFBUSxJQUFDLENBQUEsUUFBRCxDQUFVLFdBQVYsRUFBc0IsRUFBdEIsQ0FBUixFQVZEO0tBQUY7Ozs7Ozs7O0lBb0JFLElBQUcsSUFBQSxLQUFRLENBQVg7TUFDQyxHQUFBLENBQUksTUFBSixFQUFZLElBQUMsQ0FBQSxPQUFELENBQVMsQ0FBVCxDQUFaO01BQ0EsR0FBQSxDQUFJLFdBQUosRUFBaUIsSUFBQyxDQUFBLE9BQUQsQ0FBUyxDQUFULENBQWpCO01BQ0EsR0FBQSxDQUFJLDBCQUFKLEVBQWdDLElBQUMsQ0FBQSxPQUFELENBQVMsSUFBVCxDQUFoQztNQUNBLEdBQUEsQ0FBSSw2REFBSixFQUFtRSxJQUFDLENBQUEsT0FBRCxDQUFTLElBQVQsQ0FBbkU7TUFDQSxHQUFBLENBQUksMEJBQUosRUFBZ0MsSUFBQyxDQUFBLE9BQUQsQ0FBUyxJQUFULENBQWhDO01BQ0EsR0FBQSxDQUFJLE1BQUosRUFBWSxJQUFDLENBQUEsT0FBRCxDQUFTLE1BQU0sQ0FBQyxHQUFHLENBQUMsTUFBWCxHQUFrQixDQUEzQixDQUFaO01BQ0EsR0FBQSxDQUFJLElBQUosRUFBVSxJQUFDLENBQUEsUUFBRCxDQUFVLDBCQUFWLENBQVY7TUFDQSxHQUFBLENBQUksSUFBSixFQUFVLElBQUMsQ0FBQSxRQUFELENBQVUsMEJBQVYsRUFBcUMsSUFBckMsQ0FBVixFQVJEO0tBcEJGOzs7OztJQWtDRSxJQUFHLElBQUEsS0FBUSxDQUFYO01BQ0MsR0FBQSxDQUFJLDRFQUFKLEVBQWtGLElBQUMsQ0FBQSxPQUFELENBQVMsR0FBVCxDQUFsRjtNQUNBLEdBQUEsQ0FBSSwrQkFBSixFQUFxQyxJQUFDLENBQUEsT0FBRCxDQUFTLEtBQVQsQ0FBckM7TUFDQSxHQUFBLENBQUksSUFBSixFQUFVLElBQUMsQ0FBQSxRQUFELENBQVUsMEJBQVYsQ0FBVjtNQUNBLEdBQUEsQ0FBSSxJQUFKLEVBQVUsSUFBQyxDQUFBLFFBQUQsQ0FBVSwwQkFBVixFQUFxQyxJQUFyQyxDQUFWO01BQ0EsU0FBQSxHQUFZLElBQUMsQ0FBQSxZQUFELENBQWMsSUFBZCxFQUFtQixJQUFuQjtNQUNaLEdBQUEsQ0FBSSxJQUFKLEVBQVUsU0FBUyxDQUFDLEVBQUQsQ0FBbkI7TUFDQSxHQUFBLENBQUksSUFBSixFQUFVLFNBQVMsQ0FBQyxFQUFELENBQW5CO01BQ0EsR0FBQSxDQUFJLElBQUMsQ0FBQSxVQUFELENBQVksSUFBWixFQUFpQixJQUFqQixDQUFKLEVBQTRCLENBQUMsQ0FBQyxNQUFELEVBQVMsQ0FBVCxFQUFZLEdBQVosRUFBaUIsR0FBakIsQ0FBRCxFQUF3QixDQUFDLE1BQUQsRUFBUyxDQUFULEVBQVksQ0FBWixFQUFlLEdBQWYsQ0FBeEIsRUFBNkMsQ0FBQyxNQUFELEVBQVMsQ0FBVCxFQUFZLEdBQVosRUFBaUIsRUFBakIsQ0FBN0MsRUFBbUUsQ0FBQyxNQUFELEVBQVMsQ0FBVCxFQUFZLEdBQVosRUFBaUIsRUFBakIsQ0FBbkUsRUFBeUYsQ0FBQyxNQUFELEVBQVMsQ0FBVCxFQUFZLEdBQVosRUFBaUIsQ0FBakIsQ0FBekYsRUFBOEcsQ0FBQyxNQUFELEVBQVMsQ0FBVCxFQUFZLEdBQVosRUFBaUIsQ0FBakIsQ0FBOUcsRUFBbUksQ0FBQyxNQUFELEVBQVMsQ0FBVCxFQUFZLEdBQVosRUFBaUIsQ0FBakIsQ0FBbkksQ0FBNUI7TUFDQSxHQUFBLENBQUksSUFBQyxDQUFBLFVBQUQsQ0FBWSxJQUFaLEVBQWlCLElBQWpCLENBQUosRUFBNEIsQ0FBQyxDQUFDLE1BQUQsRUFBUSxDQUFSLEVBQVUsQ0FBVixFQUFZLEdBQVosQ0FBRCxFQUFrQixDQUFDLE1BQUQsRUFBUSxDQUFSLEVBQVUsR0FBVixFQUFjLEVBQWQsQ0FBbEIsRUFBb0MsQ0FBQyxNQUFELEVBQVMsQ0FBVCxFQUFZLEVBQVosRUFBZ0IsRUFBaEIsQ0FBcEMsRUFBd0QsQ0FBQyxNQUFELEVBQVMsQ0FBVCxFQUFZLEdBQVosRUFBaUIsRUFBakIsQ0FBeEQsRUFBNkUsQ0FBQyxNQUFELEVBQVMsQ0FBVCxFQUFZLEdBQVosRUFBaUIsRUFBakIsQ0FBN0UsRUFBa0csQ0FBQyxNQUFELEVBQVMsQ0FBVCxFQUFZLEdBQVosRUFBaUIsQ0FBakIsQ0FBbEcsQ0FBNUIsRUFURDs7V0FXQSxPQUFPLENBQUMsR0FBUixDQUFZLGdCQUFaO0VBL0NNOztBQXBERCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7YXNzLGxvZyxyYW5nZSxzcGFjZVNoaXB9IGZyb20gJy4uL2pzL3V0aWxzLmpzJ1xyXG5pbXBvcnQge2dsb2JhbH0gZnJvbSAnLi4vanMvZ2xvYmFscy5qcydcclxuaW1wb3J0IF8gZnJvbSAnaHR0cHM6Ly9jZG4uc2t5cGFjay5kZXYvbG9kYXNoJ1xyXG5cclxuU0laRSA9IDJcclxuXHJcbmV4cG9ydCBjbGFzcyBUcmVlXHJcblx0Y29uc3RydWN0b3IgOiAoQGFycikgLT5cclxuXHJcblx0Z2V0UGF0aCA6IChpKSA9PlxyXG5cdFx0cmVzID0gW11cclxuXHRcdHdoaWxlIHRydWVcclxuXHRcdFx0cmVzLnB1c2ggQGFycltpXVswXVxyXG5cdFx0XHRpZiBAYXJyW2ldWzJdID09IDAgdGhlbiBicmVha1xyXG5cdFx0XHRpID0gaSAtIEBhcnJbaV1bMl1cclxuXHRcdF8ucmV2ZXJzZShyZXMpLmpvaW4gJy4nXHJcblxyXG5cdGdldFN0YXJ0IDogKHBhdGgpID0+XHJcblx0XHRrZXlzID0gcGF0aC5zcGxpdCAnLidcclxuXHRcdGogPSAwXHJcblx0XHRmb3IgaSBpbiByYW5nZSBrZXlzLmxlbmd0aFxyXG5cdFx0XHRrZXkgPSBrZXlzW2ldXHJcblx0XHRcdHdoaWxlIEBhcnJbal1bMF0gIT0ga2V5IG9yIEBhcnJbal1bMV0gIT0gaVxyXG5cdFx0XHRcdGogKz0gMVxyXG5cdFx0XHRcdGlmIGo+PUBhcnIubGVuZ3RoIHRoZW4gcmV0dXJuIC0xXHJcblx0XHRqXHJcblxyXG5cdGdldFN0b3BwIDogKHBhdGgsaW5kZXgpID0+XHJcblx0XHRrZXlzID0gcGF0aC5zcGxpdCAnLidcclxuXHRcdGogPSBpbmRleCArIDFcclxuXHRcdHdoaWxlIEBhcnJbal1bMV0gPj0ga2V5cy5sZW5ndGhcclxuXHRcdFx0aiArPSAxXHJcblx0XHRqXHJcblxyXG5cdGdldFF1ZXN0aW9ucyA6IChzdGFydCxzdG9wcCkgPT5cclxuXHRcdHJlcyA9IF8ubWFwIHJhbmdlKHN0YXJ0LHN0b3BwKSwgKGkpID0+IFtAYXJyW2ldWzNdLCBAZ2V0UGF0aChpKSwgaV1cclxuXHRcdHJlcy5zb3J0IChhLGIpID0+IHNwYWNlU2hpcChiWzBdLGFbMF0pIG9yIHNwYWNlU2hpcChhWzFdLGJbMV0pXHJcblx0XHRfLm1hcCByZXMsIChpdGVtKSA9PiBpdGVtWzJdXHJcblxyXG5cdCMgc8O2ayBpZ2Vub20gaGVsYSBhcnJbc3RhcnQ6c3RvcHBdIGVmdGVyIGFsbGEgcmFkZXIgbWVkIHLDpHR0IGxldmVsIG9jaCBzb3J0ZXJhXHJcblx0IyBBdmJyeXQgb20gdmkgaGFtbmFyIHV0YW5mw7ZyIGRldCBha3R1ZWxsYSB0csOkZGV0LlxyXG5cdGdldEFuc3dlcnMgOiAoaSxzdG9wcCkgPT5cclxuXHRcdGxldmVsID0gQGFycltpXVsxXVxyXG5cdFx0cmVzID0gW11cclxuXHRcdGZvciBpdGVtIGluIEBhcnIuc2xpY2UgaSsxLHN0b3BwXHJcblx0XHRcdGlmIGl0ZW1bMV0gPD0gbGV2ZWwgdGhlbiBicmVha1xyXG5cdFx0XHRpZiBpdGVtWzFdID09IGxldmVsKzEgdGhlbiByZXMucHVzaCBpdGVtXHJcblx0XHRyZXMuc29ydCAoYSxiKSA9PiBzcGFjZVNoaXAgYlszXSwgYVszXVxyXG5cdFx0cmVzdWx0ID0gW3Jlc1swXVswXV1cclxuXHRcdGZvciBpdGVtLGkgaW4gcmVzXHJcblx0XHRcdCMgY29uc29sZS5sb2cgaXRlbSxpXHJcblx0XHRcdGlmIGk9PTAgdGhlbiBjb250aW51ZVxyXG5cdFx0XHRpZiByZXNbaV1bM10gLyByZXNbaS0xXVszXSA+PSAwLjhcclxuXHRcdFx0XHRyZXN1bHQucHVzaCBpdGVtWzBdXHJcblx0XHRcdGVsc2UgYnJlYWtcclxuXHRcdCMgY29uc29sZS5sb2cgJ3Jlc3VsdCcscmVzdWx0XHJcblx0XHRyZXN1bHRcclxuXHJcblx0dGVzdCA6ID0+XHJcblxyXG5cdFx0aWYgU0laRSA9PSAwXHJcblx0XHRcdGFzcyBcImQyZDRcIiwgQGdldFBhdGggMFxyXG5cdFx0XHRhc3MgXCJkMmQ0Lmc4ZjZcIiwgQGdldFBhdGggMVxyXG5cdFx0XHRhc3MgXCJnMmczLmQ3ZDUuZjFnMlwiLCBAZ2V0UGF0aCA2MFxyXG5cclxuXHRcdFx0YXNzIDIyLCBAZ2V0U3RhcnQgXCJlMmU0XCJcclxuXHRcdFx0YXNzIDMyLCBAZ2V0U3RhcnQgXCJlMmU0LmU3ZTVcIlxyXG5cdFx0XHRhc3MgLTEsIEBnZXRTdGFydCBcImUyZTQuZTdlNS5nMWYzLmI4YzYuZjFjNFwiXHJcblxyXG5cdFx0XHRhc3MgNDIsIEBnZXRTdG9wcCBcImUyZTRcIiwyMlxyXG5cdFx0XHRhc3MgMzQsIEBnZXRTdG9wcCBcImUyZTQuZTdlNVwiLDMyXHJcblxyXG5cdFx0XHQjIHF1ZXN0aW9ucyA9IGdldFF1ZXN0aW9ucyAzMiwzNFxyXG5cclxuXHRcdFx0IyBhc3MgWzksICdlMmU0LmU3ZTUnXSwgcXVlc3Rpb25zWzBdXHJcblx0XHRcdCMgYXNzIFs2LCAnZTJlNC5lN2U1LmcxZjMnXSwgcXVlc3Rpb25zWzFdXHJcblxyXG5cdFx0XHQjIGFzcyBnZXRBbnN3ZXJzKDIyLDQyKSwgW1snYzdjNScsIDEsIDEsIDE0XSwgWydnN2c2JywgMSwgMTUsIDEzXSwgWydkN2Q1JywgMSwgMywgOV0sIFsnZTdlNScsIDEsIDEwLCA5XSwgWydjN2M2JywgMSwgMTIsIDZdXVxyXG5cdFx0XHQjIGFzcyBnZXRBbnN3ZXJzKDMyLDM0KSwgW1snZzFmMycsIDIsIDEsIDZdXVxyXG5cclxuXHRcdGlmIFNJWkUgPT0gMVxyXG5cdFx0XHRhc3MgXCJkMmQ0XCIsIEBnZXRQYXRoIDBcclxuXHRcdFx0YXNzIFwiZDJkNC5kN2Q1XCIsIEBnZXRQYXRoIDFcclxuXHRcdFx0YXNzIFwiZTJlNC5lN2U1LmcxZjMuYjhjNi5mMWM0XCIsIEBnZXRQYXRoIDI1NTdcclxuXHRcdFx0YXNzIFwiZTJlNC5lN2U1LmcxZjMuYjhjNi5mMWM0LmY4YzUuYjJiNC5jNWI0LmMyYzMuYjRlNy5kMmQ0LmM2YTVcIiwgQGdldFBhdGggMjYxMVxyXG5cdFx0XHRhc3MgXCJlMmU0LmU3ZTUuZzFmMy5iOGM2LmQyZDRcIiwgQGdldFBhdGggMjYxMlxyXG5cdFx0XHRhc3MgXCJjMmMzXCIsIEBnZXRQYXRoIGdsb2JhbC5hcnIubGVuZ3RoLTFcclxuXHRcdFx0YXNzIDI1NTcsIEBnZXRTdGFydCBcImUyZTQuZTdlNS5nMWYzLmI4YzYuZjFjNFwiXHJcblx0XHRcdGFzcyAyNjEyLCBAZ2V0U3RvcHAgXCJlMmU0LmU3ZTUuZzFmMy5iOGM2LmYxYzRcIiwyNTU3XHJcblx0XHRcdCMgcXVlc3Rpb25zID0gZ2V0UXVlc3Rpb25zIDI1NTcsMjYxMlxyXG5cdFx0XHQjIGFzcyBbMTM0LCAnZTJlNC5lN2U1LmcxZjMuYjhjNi5mMWM0J10sIHF1ZXN0aW9uc1swXSBcclxuXHRcdFx0IyBhc3MgWzUsICdlMmU0LmU3ZTUuZzFmMy5iOGM2LmYxYzQuZzhmNi5lMWcxLmY4ZTcnXSwgXy5sYXN0IHF1ZXN0aW9uc1xyXG5cdFx0XHQjIGFzcyBnZXRBbnN3ZXJzKDI1NTcsMjYxMiksIFtbJ2c4ZjYnLCA1LCAxLCA2MF0sIFsnZjhjNScsIDUsIDI5LCA2MF1dXHJcblxyXG5cdFx0aWYgU0laRSA9PSAyXHJcblx0XHRcdGFzcyBcImUyZTQuYzdjNS5nMWYzLmU3ZTYuZDJkNC5jNWQ0LmYzZDQuYTdhNi5mMWQzLmQ4YzcuZTFnMS5iOGM2LmQ0YzYuZDdjNi5iMWQyXCIsIEBnZXRQYXRoIDEwMFxyXG5cdFx0XHRhc3MgXCJlMmU0LmQ3ZDUuZTRkNS5nOGY2LmcxZjMuZjZkNVwiLCBAZ2V0UGF0aCAxMDAwMFxyXG5cdFx0XHRhc3MgNDU4NSwgQGdldFN0YXJ0IFwiZTJlNC5lN2U1LmcxZjMuYjhjNi5mMWM0XCJcclxuXHRcdFx0YXNzIDQ5MDAsIEBnZXRTdG9wcCBcImUyZTQuZTdlNS5nMWYzLmI4YzYuZjFjNFwiLDQ1ODVcclxuXHRcdFx0cXVlc3Rpb25zID0gQGdldFF1ZXN0aW9ucyA0NTg1LDQ5MDBcclxuXHRcdFx0YXNzIDQ4NDAsIHF1ZXN0aW9uc1sxNV1cclxuXHRcdFx0YXNzIDQ4NDEsIHF1ZXN0aW9uc1sxNl1cclxuXHRcdFx0YXNzIEBnZXRBbnN3ZXJzKDQ1ODUsNDkwMCksIFtbJ2c4ZjYnLCA1LCAxNDYsIDUyOV0sIFsnZjhjNScsIDUsIDEsIDQ1NF0sIFsnZjhlNycsIDUsIDMwNSwgMTldLCBbJ2c3ZzYnLCA1LCAzMTIsIDEyXSwgWydmN2Y1JywgNSwgMzExLCA4XSwgWydkN2Q2JywgNSwgMzEzLCA4XSwgWydhN2E2JywgNSwgMzEwLCA1XV1cclxuXHRcdFx0YXNzIEBnZXRBbnN3ZXJzKDQ3MzEsNDkwMCksIFtbJ2QyZDMnLDYsMSwzNThdLFsnZjNnNScsNiwxMDgsOTVdLFsnZDJkNCcsIDYsIDg1LCAzM10sWydlMWcxJywgNiwgMTU0LCAyMl0sWydiMWMzJywgNiwgMTQ1LCAxMV0sWydjMmMzJywgNiwgMTU4LCA4XV1cclxuXHJcblx0XHRjb25zb2xlLmxvZyAndGVzdFRyZWUgZG9uZS4nXHJcbiJdfQ==
//# sourceURL=c:\github\2023-026-chessx2\coffee\tree.coffee