// Generated by CoffeeScript 2.5.1
var boundMethodCheck = function(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new Error('Bound instance method accessed before binding'); } },
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; };

import {
  global
} from '../js/globals.js';

import {
  param,
  range
} from '../js/utils.js';

export var Button = class Button {
  constructor(x1, y1, text1, onclick1) {
    this.draw = this.draw.bind(this);
    this.inside = this.inside.bind(this);
    this.x = x1;
    this.y = y1;
    this.text = text1;
    this.onclick = onclick1;
    this.w = 3 * global.size();
    this.h = 4 * global.size();
    this.bg = 'lightgray';
    this.fg = 'black';
    this.align = CENTER;
  }

  draw() {
    var x;
    noStroke();
    if (this.align === LEFT) {
      x = this.x - 0.45 * this.w;
    } else {
      x = this.x;
    }
    push();
    textSize(2 * global.size()); // 0.4
    textAlign(this.align);
    noStroke();
    text(this.text, x, this.y + 0.05 * global.size());
    return pop();
  }

  inside(x, y) {
    return (this.x - this.w / 2 < x && x < this.x + this.w / 2) && (this.y - this.h / 2 < y && y < this.y + this.h / 2);
  }

};

export var ClockButton = class ClockButton extends Button {
  constructor(x, y, nr, onclick) {
    super(x, y, '', onclick);
    this.draw = this.draw.bind(this);
    this.drawClock = this.drawClock.bind(this);
    this.resize = this.resize.bind(this);
    this.nr = nr;
    this.W = 2.7;
    this.H = 2.7; // Hela hÃ¶jden
    this.resize();
  }

  draw() {
    boundMethodCheck(this, ClockButton);
    noStroke();
    push();
    textSize(2 * global.size());
    textAlign(this.align);
    noStroke();
    this.drawClock(0);
    this.drawClock(1);
    return pop();
  }

  drawClock(player) {
    var faktor, minuter, p, res, sekunder, t, x, y;
    boundMethodCheck(this, ClockButton);
    p = modulo(global.chess.history().length, 2);
    if (global.clocks[player] < 60) {
      fill("red");
    }
    noStroke();
    textSize(global.size());
    t = global.clocks[player];
    if (!global.paused && p !== player) {
      t -= 1 / 240;
    }
    global.clocks[player] = t;
    if (t < 60) {
      res = t.toFixed(1);
    } else {
      t = round(t);
      sekunder = modulo(t, 60);
      t = Math.floor(t / 60);
      if (sekunder < 10) {
        sekunder = "0" + sekunder;
      }
      minuter = t;
      if (minuter < 10) {
        minuter = "0" + minuter;
      }
      res = minuter + ":" + sekunder;
    }
    this.bg = ['black', 'white'][player];
    if (p === player || global.paused) {
      this.bg = 'gray';
    }
    push();
    x = this.nr === 0 ? global.mx() / 2 : width - global.mx() / 2;
    y = global.size() * [8, 10][player];
    translate(x, y);
    if (this.nr === 1) {
      scale(-1, -1);
    }
    fill(this.bg);
    rect(0, 0, this.W * global.size(), this.H / 3 * global.size());
    if (global.clocks[player] < 60) {
      fill("red");
    } else {
      fill(['white', 'black'][player]);
    }
    faktor = global.windows ? 0.1 : 0.0;
    text(res, 0, faktor * global.size());
    pop();
    push();
    y = global.size() * 9;
    translate(x, y);
    if (this.nr === 1) {
      scale(-1, -1);
    }
    fill('white');
    noStroke();
    textSize(global.size() * 0.5);
    text(global.material, 0, 0);
    return pop();
  }

  resize() {
    boundMethodCheck(this, ClockButton);
    this.w = this.W * global.size();
    return this.h = this.H * global.size();
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnV0dG9uLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXGJ1dHRvbi5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUE7OztBQUFBLE9BQUE7RUFBUSxNQUFSO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVEsS0FBUjtFQUFjLEtBQWQ7Q0FBQSxNQUFBOztBQUVBLE9BQUEsSUFBYSxTQUFOLE1BQUEsT0FBQTtFQUNOLFdBQWEsR0FBQSxJQUFBLE9BQUEsVUFBQSxDQUFBO1FBT2IsQ0FBQSxXQUFBLENBQUE7UUFVQSxDQUFBLGFBQUEsQ0FBQTtJQWpCYyxJQUFDLENBQUE7SUFBRSxJQUFDLENBQUE7SUFBRSxJQUFDLENBQUE7SUFBSyxJQUFDLENBQUE7SUFDMUIsSUFBQyxDQUFBLENBQUQsR0FBSyxDQUFBLEdBQUksTUFBTSxDQUFDLElBQVAsQ0FBQTtJQUNULElBQUMsQ0FBQSxDQUFELEdBQUssQ0FBQSxHQUFJLE1BQU0sQ0FBQyxJQUFQLENBQUE7SUFDVCxJQUFDLENBQUEsRUFBRCxHQUFNO0lBQ04sSUFBQyxDQUFBLEVBQUQsR0FBTTtJQUNOLElBQUMsQ0FBQSxLQUFELEdBQVM7RUFMRzs7RUFPYixJQUFPLENBQUEsQ0FBQTtBQUNSLFFBQUE7SUFBRSxRQUFBLENBQUE7SUFDQSxJQUFHLElBQUMsQ0FBQSxLQUFELEtBQVEsSUFBWDtNQUFxQixDQUFBLEdBQUUsSUFBQyxDQUFBLENBQUQsR0FBRyxJQUFBLEdBQUssSUFBQyxDQUFBLEVBQWhDO0tBQUEsTUFBQTtNQUF1QyxDQUFBLEdBQUUsSUFBQyxDQUFBLEVBQTFDOztJQUNBLElBQUEsQ0FBQTtJQUNBLFFBQUEsQ0FBUyxDQUFBLEdBQUUsTUFBTSxDQUFDLElBQVAsQ0FBQSxDQUFYLEVBSEY7SUFJRSxTQUFBLENBQVUsSUFBQyxDQUFBLEtBQVg7SUFDQSxRQUFBLENBQUE7SUFDQSxJQUFBLENBQUssSUFBQyxDQUFBLElBQU4sRUFBWSxDQUFaLEVBQWMsSUFB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WjtJQUNBLElBQUcsSUFBQyxDQUFBLEVBQUQsS0FBSyxDQUFSO01BQWUsS0FBQSxDQUFNLENBQUMsQ0FBUCxFQUFTLENBQUMsQ0FBVixFQUFmOztJQUNBLElBQUEsQ0FBSyxPQUFMO0lBQ0EsUUFBQSxDQUFBO0lBQ0EsUUFBQSxDQUFTLE1BQU0sQ0FBQyxJQUFQLENBQUEsQ0FBQSxHQUFjLEdBQXZCO0lBQ0EsSUFBQSxDQUFLLE1BQU0sQ0FBQyxRQUFaLEVBQXNCLENBQXRCLEVBQXdCLENBQXhCO1dBQ0EsR0FBQSxDQUFBO0VBN0NXOztFQStDWixNQUFTLENBQUEsQ0FBQTsyQkFoRUc7SUFpRVgsSUFBQyxDQUFBLENBQUQsR0FBSyxJQUFDLENBQUEsQ0FBRCxHQUFLLE1BQU0sQ0FBQyxJQUFQLENBQUE7V0FDVixJQUFDLENBQUEsQ0FBRCxHQUFLLElBQUMsQ0FBQSxDQUFELEdBQUssTUFBTSxDQUFDLElBQVAsQ0FBQTtFQUZGOztBQWhFSCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Z2xvYmFsfSBmcm9tICcuLi9qcy9nbG9iYWxzLmpzJ1xyXG5pbXBvcnQge3BhcmFtLHJhbmdlfSBmcm9tICcuLi9qcy91dGlscy5qcydcclxuXHJcbmV4cG9ydCBjbGFzcyBCdXR0b25cclxuXHRjb25zdHJ1Y3RvcjogKEB4LEB5LEB0ZXh0LEBvbmNsaWNrKSAtPlxyXG5cdFx0QHcgPSAzICogZ2xvYmFsLnNpemUoKVxyXG5cdFx0QGggPSA0ICogZ2xvYmFsLnNpemUoKVxyXG5cdFx0QGJnID0gJ2xpZ2h0Z3JheSdcclxuXHRcdEBmZyA9ICdibGFjaydcclxuXHRcdEBhbGlnbiA9IENFTlRFUlxyXG5cclxuXHRkcmF3IDogPT5cclxuXHRcdG5vU3Ryb2tlKClcclxuXHRcdGlmIEBhbGlnbj09TEVGVCB0aGVuIHg9QHgtMC40NSpAdyBlbHNlIHg9QHhcclxuXHRcdHB1c2goKVxyXG5cdFx0dGV4dFNpemUgMipnbG9iYWwuc2l6ZSgpICMgMC40XHJcblx0XHR0ZXh0QWxpZ24gQGFsaWduXHJcblx0XHRub1N0cm9rZSgpXHJcblx0XHR0ZXh0IEB0ZXh0LCB4LEB5KzAuMDUqZ2xvYmFsLnNpemUoKVxyXG5cdFx0cG9wKClcclxuXHJcblx0aW5zaWRlIDogKHgseSkgPT4gQHgtQHcvMiA8IHggPCBAeCtAdy8yIGFuZCBAeS1AaC8yIDwgeSA8IEB5K0BoLzJcclxuXHJcbmV4cG9ydCBjbGFzcyBDbG9ja0J1dHRvbiBleHRlbmRzIEJ1dHRvblxyXG5cdGNvbnN0cnVjdG9yOiAoeCx5LEBucixvbmNsaWNrKSAtPlxyXG5cdFx0c3VwZXIgeCx5LCcnLG9uY2xpY2tcclxuXHRcdEBXID0gMi43XHJcblx0XHRASCA9IDIuNyAjIEhlbGEgaMO2amRlblxyXG5cdFx0QHJlc2l6ZSgpXHJcblxyXG5cdGRyYXcgOiA9PlxyXG5cdFx0bm9TdHJva2UoKVxyXG5cdFx0cHVzaCgpXHJcblx0XHR0ZXh0U2l6ZSAyKmdsb2JhbC5zaXplKClcclxuXHRcdHRleHRBbGlnbiBAYWxpZ25cclxuXHRcdG5vU3Ryb2tlKClcclxuXHRcdEBkcmF3Q2xvY2sgMFxyXG5cdFx0QGRyYXdDbG9jayAxXHJcblx0XHRwb3AoKVxyXG5cclxuXHRkcmF3Q2xvY2sgOiAocGxheWVyKSA9PlxyXG5cdFx0cCA9IGdsb2JhbC5jaGVzcy5oaXN0b3J5KCkubGVuZ3RoICUlIDJcclxuXHRcdGlmIGdsb2JhbC5jbG9ja3NbcGxheWVyXSA8IDYwIHRoZW4gZmlsbCBcInJlZFwiXHJcblx0XHRub1N0cm9rZSgpXHJcblx0XHR0ZXh0U2l6ZSBnbG9iYWwuc2l6ZSgpXHJcblx0XHR0ID0gZ2xvYmFsLmNsb2Nrc1twbGF5ZXJdXHJcblx0XHRpZiBub3QgZ2xvYmFsLnBhdXNlZCBhbmQgcCE9cGxheWVyXHJcblx0XHRcdHQgLT0gMS8yNDBcclxuXHRcdGdsb2JhbC5jbG9ja3NbcGxheWVyXSA9IHRcclxuXHRcdGlmIHQgPCA2MFxyXG5cdFx0XHRyZXMgPSB0LnRvRml4ZWQgMVxyXG5cdFx0ZWxzZVxyXG5cdFx0XHR0ID0gcm91bmQgdFxyXG5cdFx0XHRzZWt1bmRlciA9IHQgJSUgNjBcclxuXHRcdFx0dCA9IHQgLy8gNjBcclxuXHRcdFx0aWYgc2VrdW5kZXIgPCAxMCB0aGVuIHNla3VuZGVyID0gXCIwXCIgKyBzZWt1bmRlclxyXG5cdFx0XHRtaW51dGVyID0gdFxyXG5cdFx0XHRpZiBtaW51dGVyIDwgMTAgdGhlbiBtaW51dGVyID0gXCIwXCIgKyBtaW51dGVyXHJcblx0XHRcdHJlcyA9IG1pbnV0ZXIgKyBcIjpcIiArIHNla3VuZGVyXHJcblxyXG5cdFx0QGJnID0gWydibGFjaycsJ3doaXRlJ11bcGxheWVyXVxyXG5cdFx0QGJnID0gJ2dyYXknIGlmIHAgPT0gcGxheWVyIG9yIGdsb2JhbC5wYXVzZWRcclxuXHJcblx0XHRwdXNoKClcclxuXHRcdHggPSBpZiBAbnIgPT0gMCB0aGVuIGdsb2JhbC5teCgpLzIgZWxzZSB3aWR0aC1nbG9iYWwubXgoKS8yXHJcblx0XHR5ID0gZ2xvYmFsLnNpemUoKSAqIFs4LDEwXVtwbGF5ZXJdXHJcblx0XHR0cmFuc2xhdGUgeCwgeVxyXG5cdFx0aWYgQG5yPT0xIHRoZW4gc2NhbGUgLTEsLTFcclxuXHRcdGZpbGwgQGJnXHJcblx0XHRyZWN0IDAsIDAsIEBXKmdsb2JhbC5zaXplKCksIEBILzMqZ2xvYmFsLnNpemUoKVxyXG5cdFx0aWYgZ2xvYmFsLmNsb2Nrc1twbGF5ZXJdIDwgNjAgdGhlbiBmaWxsIFwicmVkXCJcclxuXHRcdGVsc2UgZmlsbCBbJ3doaXRlJywnYmxhY2snXVtwbGF5ZXJdXHJcblxyXG5cdFx0ZmFrdG9yID0gaWYgZ2xvYmFsLndpbmRvd3MgdGhlbiAwLjEgZWxzZSAwLjBcclxuXHRcdHRleHQgcmVzLCAwLCBmYWt0b3IgKiBnbG9iYWwuc2l6ZSgpXHJcblx0XHRwb3AoKVxyXG5cclxuXHRcdHB1c2goKVxyXG5cdFx0eSA9IGdsb2JhbC5zaXplKCkgKiA5XHJcblx0XHR0cmFuc2xhdGUgeCx5XHJcblx0XHRpZiBAbnI9PTEgdGhlbiBzY2FsZSAtMSwtMVxyXG5cdFx0ZmlsbCAnd2hpdGUnXHJcblx0XHRub1N0cm9rZSgpXHJcblx0XHR0ZXh0U2l6ZSBnbG9iYWwuc2l6ZSgpKjAuNVxyXG5cdFx0dGV4dCBnbG9iYWwubWF0ZXJpYWwsIDAsMFxyXG5cdFx0cG9wKClcclxuXHJcblx0cmVzaXplIDogPT5cclxuXHRcdEB3ID0gQFcgKiBnbG9iYWwuc2l6ZSgpXHJcblx0XHRAaCA9IEBIICogZ2xvYmFsLnNpemUoKVxyXG5cclxuXHJcbiJdfQ==
//# sourceURL=c:\github\2023-026-chessx2\coffee\button.coffee