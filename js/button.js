// Generated by CoffeeScript 2.5.1
var boundMethodCheck = function(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new Error('Bound instance method accessed before binding'); } },
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; };

import {
  global
} from '../js/globals.js';

import {
  param,
  range
} from '../js/utils.js';

export var Button = class Button {
  constructor(x1, y1, text1, onclick1) {
    this.draw = this.draw.bind(this);
    this.inside = this.inside.bind(this);
    this.x = x1;
    this.y = y1;
    this.text = text1;
    this.onclick = onclick1;
    this.w = 3 * global.size();
    this.h = 4 * global.size();
    this.bg = 'lightgray';
    this.fg = 'black';
    this.align = CENTER;
  }

  draw() {
    var x;
    noStroke();
    //fill @bg
    //rect @x,@y,@w,@h*0.65
    if (this.align === LEFT) {
      x = this.x - 0.45 * this.w;
    } else {
      x = this.x;
    }
    //fill @fg
    push();
    textSize(2 * global.size()); // 0.4
    textAlign(this.align);
    noStroke();
    text(this.text, x, this.y + 0.05 * global.size());
    return pop();
  }

  inside(x, y) {
    param.Number(x);
    param.Number(y);
    return param.Boolean((this.x - this.w / 2 < x && x < this.x + this.w / 2) && (this.y - this.h / 2 < y && y < this.y + this.h / 2));
  }

};

export var ClockButton = class ClockButton extends Button {
  constructor(x, y, nr, onclick) {
    super(x, y, '', onclick);
    this.draw = this.draw.bind(this);
    this.drawClock = this.drawClock.bind(this);
    this.nr = nr;
    this.w = 2.6 * global.size();
    this.h = 4 * global.size();
    this.state = -1; // paused
  }

  draw() {
    boundMethodCheck(this, ClockButton);
    noStroke();
    push();
    textSize(2 * global.size());
    textAlign(this.align);
    noStroke();
    this.drawClock(0);
    this.drawClock(1);
    return pop();
  }

  drawClock(player) {
    var minuter, p, res, sekunder, t, timmar, x, y;
    boundMethodCheck(this, ClockButton);
    p = modulo(global.chess.history().length, 2);
    if (global.clocks[player] < 60) {
      fill("red");
    }
    noStroke();
    textSize(global.size());
    t = global.clocks[player];
    if (!global.paused && p !== player) {
      t -= 1 / 240;
    }
    global.clocks[player] = t;
    t = round(t);
    sekunder = modulo(t, 60);
    t = Math.floor(t / 60);
    if (sekunder < 10) {
      sekunder = "0" + sekunder;
    }
    minuter = modulo(t, 60);
    if (minuter < 10) {
      minuter = "0" + minuter;
    }
    timmar = Math.floor(t / 60);
    if (timmar > 0) {
      res = timmar + "h" + minuter;
    } else {
      res = minuter + ":" + sekunder;
    }
    this.bg = ['black', 'white'][player];
    if (p === player || global.paused) {
      this.bg = 'gray';
    }
    push();
    x = this.nr === 0 ? global.mx() / 2 : width - global.mx() / 2;
    y = global.size() * [8, 10][player];
    translate(x, y);
    if (this.nr === 1) {
      scale(-1, -1);
    }
    fill(this.bg);
    rect(0, 0, this.w, this.h * 0.22);
    fill(['white', 'black'][player]);
    console.log(global.windows);
    if (global.windows) {
      text(res, 0, 0.1 * global.size());
    } else {
      text(res, 0, 0.0 * global.size());
    }
    pop();
    push();
    y = global.size() * 9;
    translate(x, y);
    if (this.nr === 1) {
      scale(-1, -1);
    }
    fill('white');
    textSize(global.size() * 0.5);
    text(global.material, 0, 0); //[-global.size(),global.size()][player]
    return pop();
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnV0dG9uLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXGJ1dHRvbi5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUE7OztBQUFBLE9BQUE7RUFBUSxNQUFSO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVEsS0FBUjtFQUFjLEtBQWQ7Q0FBQSxNQUFBOztBQUVBLE9BQUEsSUFBYSxTQUFOLE1BQUEsT0FBQTtFQUNOLFdBQWEsR0FBQSxJQUFBLE9BQUEsVUFBQSxDQUFBO1FBT2IsQ0FBQSxXQUFBLENBQUE7UUFjQSxDQUFBLGFBQUEsQ0FBQTtJQXJCYyxJQUFDLENBQUE7SUFBRSxJQUFDLENBQUE7SUFBRSxJQUFDLENBQUE7SUFBSyxJQUFDLENBQUE7SUFDMUIsSUFBQyxDQUFBLENBQUQsR0FBSyxDQUFBLEdBQUksTUFBTSxDQUFDLElBQVAsQ0FBQTtJQUNULElBQUMsQ0FBQSxDQUFELEdBQUssQ0FBQSxHQUFJLE1BQU0sQ0FBQyxJQUFQLENBQUE7SUFDVCxJQUFDLENBQUEsRUFBRCxHQUFNO0lBQ04sSUFBQyxDQUFBLEVBQUQsR0FBTTtJQUNOLElBQUMsQ0FBQSxLQUFELEdBQVM7RUFMRzs7RUFPYixJQUFPLENBQUEsQ0FBQTtBQUNSLFFBQUE7SUFBRSxRQUFBLENBQUEsRUFBRjs7O0lBSUUsSUFBRyxJQUFDLENBQUEsS0FBRCxLQUFRLElBQVg7TUFBcUIsQ0FBQSxHQUFFLElBQUMsQ0FBQSxDQUFELEdBQUcsSUFBQSxHQUFLLElBQUMsQ0FBQSxFQUFoQztLQUFBLE1BQUE7TUFBdUMsQ0FBQSxHQUFFLElBQUMsQ0FBQSxFQUExQztLQUpGOztJQU1FLElBQUEsQ0FBQTtJQUNBLFFBQUEsQ0FBUyxDQUFBLEdBQUUsTUFBTSxDQUFDLElBQVAsQ0FBQSxDQUFYLEVBUEY7SUFRRSxTQUFBLENBQVUsSUFBQyxDQUFBLEtBQVg7SUFDQSxRQUFBLENBQUE7SUFDQSxJQUFBLENBQUssSUFBQyxDQUFBLElBQU4sRUFBWSxD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QWhCLEVBSEQ7O0lBSUEsR0FBQSxDQUFBO0lBRUEsSUFBQSxDQUFBO0lBQ0EsQ0FBQSxHQUFJLE1BQU0sQ0FBQyxJQUFQLENBQUEsQ0FBQSxHQUFnQjtJQUNwQixTQUFBLENBQVUsQ0FBVixFQUFZLENBQVo7SUFDQSxJQUFHLElBQUMsQ0FBQSxFQUFELEtBQUssQ0FBUjtNQUFlLEtBQUEsQ0FBTSxDQUFDLENBQVAsRUFBUyxDQUFDLENBQVYsRUFBZjs7SUFDQSxJQUFBLENBQUssT0FBTDtJQUNBLFFBQUEsQ0FBUyxNQUFNLENBQUMsSUFBUCxDQUFBLENBQUEsR0FBYyxHQUF2QjtJQUNBLElBQUEsQ0FBSyxNQUFNLENBQUMsUUFBWixFQUFzQixDQUF0QixFQUF3QixDQUF4QixFQTFDRjtXQTJDRSxHQUFBLENBQUE7RUE1Q1c7O0FBakJOIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtnbG9iYWx9IGZyb20gJy4uL2pzL2dsb2JhbHMuanMnXHJcbmltcG9ydCB7cGFyYW0scmFuZ2V9IGZyb20gJy4uL2pzL3V0aWxzLmpzJ1xyXG5cclxuZXhwb3J0IGNsYXNzIEJ1dHRvblxyXG5cdGNvbnN0cnVjdG9yOiAoQHgsQHksQHRleHQsQG9uY2xpY2spIC0+XHJcblx0XHRAdyA9IDMgKiBnbG9iYWwuc2l6ZSgpXHJcblx0XHRAaCA9IDQgKiBnbG9iYWwuc2l6ZSgpXHJcblx0XHRAYmcgPSAnbGlnaHRncmF5J1xyXG5cdFx0QGZnID0gJ2JsYWNrJ1xyXG5cdFx0QGFsaWduID0gQ0VOVEVSXHJcblxyXG5cdGRyYXcgOiA9PlxyXG5cdFx0bm9TdHJva2UoKVxyXG5cdFx0I2ZpbGwgQGJnXHJcblx0XHQjcmVjdCBAeCxAeSxAdyxAaCowLjY1XHJcblxyXG5cdFx0aWYgQGFsaWduPT1MRUZUIHRoZW4geD1AeC0wLjQ1KkB3IGVsc2UgeD1AeFxyXG5cdFx0I2ZpbGwgQGZnXHJcblx0XHRwdXNoKClcclxuXHRcdHRleHRTaXplIDIqZ2xvYmFsLnNpemUoKSAjIDAuNFxyXG5cdFx0dGV4dEFsaWduIEBhbGlnblxyXG5cdFx0bm9TdHJva2UoKVxyXG5cdFx0dGV4dCBAdGV4dCwgeCxAeSswLjA1Kmdsb2JhbC5zaXplKClcclxuXHRcdHBvcCgpXHJcblxyXG5cdGluc2lkZSA6ICh4LHkpID0+XHJcblx0XHRwYXJhbS5OdW1iZXIgeFxyXG5cdFx0cGFyYW0uTnVtYmVyIHlcclxuXHRcdHBhcmFtLkJvb2xlYW4gQHgtQHcvMiA8IHggPCBAeCtAdy8yIGFuZCBAeS1AaC8yIDwgeSA8IEB5K0BoLzJcclxuXHJcbmV4cG9ydCBjbGFzcyBDbG9ja0J1dHRvbiBleHRlbmRzIEJ1dHRvblxyXG5cdGNvbnN0cnVjdG9yOiAoeCx5LEBucixvbmNsaWNrKSAtPlxyXG5cdFx0c3VwZXIgeCx5LCcnLG9uY2xpY2tcclxuXHRcdEB3ID0gMi42ICogZ2xvYmFsLnNpemUoKVxyXG5cdFx0QGggPSA0ICogZ2xvYmFsLnNpemUoKVxyXG5cdFx0QHN0YXRlID0gLTEgIyBwYXVzZWRcclxuXHJcblx0ZHJhdyA6ID0+XHJcblx0XHRub1N0cm9rZSgpXHJcblx0XHRwdXNoKClcclxuXHRcdHRleHRTaXplIDIqZ2xvYmFsLnNpemUoKVxyXG5cdFx0dGV4dEFsaWduIEBhbGlnblxyXG5cdFx0bm9TdHJva2UoKVxyXG5cdFx0QGRyYXdDbG9jayAwXHJcblx0XHRAZHJhd0Nsb2NrIDFcclxuXHRcdHBvcCgpXHJcblxyXG5cdGRyYXdDbG9jayA6IChwbGF5ZXIpID0+XHJcblx0XHRwID0gZ2xvYmFsLmNoZXNzLmhpc3RvcnkoKS5sZW5ndGggJSUgMlxyXG5cdFx0aWYgZ2xvYmFsLmNsb2Nrc1twbGF5ZXJdIDwgNjAgdGhlbiBmaWxsIFwicmVkXCJcclxuXHRcdG5vU3Ryb2tlKClcclxuXHRcdHRleHRTaXplIGdsb2JhbC5zaXplKClcclxuXHRcdHQgPSBnbG9iYWwuY2xvY2tzW3BsYXllcl1cclxuXHRcdGlmIG5vdCBnbG9iYWwucGF1c2VkIGFuZCBwIT1wbGF5ZXJcclxuXHRcdFx0dCAtPSAxLzI0MFxyXG5cdFx0Z2xvYmFsLmNsb2Nrc1twbGF5ZXJdID0gdFxyXG5cdFx0dCA9IHJvdW5kIHRcclxuXHRcdHNla3VuZGVyID0gdCAlJSA2MFxyXG5cdFx0dCA9IHQgLy8gNjBcclxuXHRcdGlmIHNla3VuZGVyIDwgMTAgdGhlbiBzZWt1bmRlciA9IFwiMFwiICsgc2VrdW5kZXJcclxuXHRcdG1pbnV0ZXIgPSB0ICUlIDYwXHJcblx0XHRpZiBtaW51dGVyIDwgMTAgdGhlbiBtaW51dGVyID0gXCIwXCIgKyBtaW51dGVyXHJcblx0XHR0aW1tYXIgPSB0IC8vIDYwXHJcblx0XHRpZiB0aW1tYXIgPiAwIHRoZW4gcmVzID0gdGltbWFyICsgXCJoXCIgKyBtaW51dGVyXHJcblx0XHRlbHNlIHJlcyA9IG1pbnV0ZXIgKyBcIjpcIiArIHNla3VuZGVyXHJcblxyXG5cdFx0QGJnID0gWydibGFjaycsJ3doaXRlJ11bcGxheWVyXVxyXG5cdFx0QGJnID0gJ2dyYXknIGlmIHAgPT0gcGxheWVyIG9yIGdsb2JhbC5wYXVzZWRcclxuXHJcblx0XHRwdXNoKClcclxuXHRcdHggPSBpZiBAbnIgPT0gMCB0aGVuIGdsb2JhbC5teCgpLzIgZWxzZSB3aWR0aC1nbG9iYWwubXgoKS8yXHJcblx0XHR5ID0gZ2xvYmFsLnNpemUoKSAqIFs4LDEwXVtwbGF5ZXJdXHJcblx0XHR0cmFuc2xhdGUgeCwgeVxyXG5cdFx0aWYgQG5yPT0xIHRoZW4gc2NhbGUgLTEsLTFcclxuXHRcdGZpbGwgQGJnXHJcblx0XHRyZWN0IDAsMCxAdyxAaCowLjIyXHJcblx0XHRmaWxsIFsnd2hpdGUnLCdibGFjayddW3BsYXllcl1cclxuXHRcdGNvbnNvbGUubG9nIGdsb2JhbC53aW5kb3dzXHJcblx0XHRpZiBnbG9iYWwud2luZG93c1xyXG5cdFx0XHR0ZXh0IHJlcywgMCwwLjEqZ2xvYmFsLnNpemUoKVxyXG5cdFx0ZWxzZVxyXG5cdFx0XHR0ZXh0IHJlcywgMCwwLjAqZ2xvYmFsLnNpemUoKVxyXG5cdFx0cG9wKClcclxuXHJcblx0XHRwdXNoKClcclxuXHRcdHkgPSBnbG9iYWwuc2l6ZSgpICogOVxyXG5cdFx0dHJhbnNsYXRlIHgseVxyXG5cdFx0aWYgQG5yPT0xIHRoZW4gc2NhbGUgLTEsLTFcclxuXHRcdGZpbGwgJ3doaXRlJ1xyXG5cdFx0dGV4dFNpemUgZ2xvYmFsLnNpemUoKSowLjVcclxuXHRcdHRleHQgZ2xvYmFsLm1hdGVyaWFsLCAwLDAgI1stZ2xvYmFsLnNpemUoKSxnbG9iYWwuc2l6ZSgpXVtwbGF5ZXJdXHJcblx0XHRwb3AoKVxyXG5cclxuIl19
//# sourceURL=c:\github\2023-026-chessx2\coffee\button.coffee