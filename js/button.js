// Generated by CoffeeScript 2.5.1
var boundMethodCheck = function(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new Error('Bound instance method accessed before binding'); } },
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; };

import {
  global
} from '../js/globals.js';

import {
  param,
  range
} from '../js/utils.js';

export var Button = class Button {
  constructor(x1, y1, text1, onclick1) {
    this.draw = this.draw.bind(this);
    this.inside = this.inside.bind(this);
    this.x = x1;
    this.y = y1;
    this.text = text1;
    this.onclick = onclick1;
    this.w = 3 * global.size();
    this.h = 4 * global.size();
    this.bg = 'lightgray';
    this.fg = 'black';
    this.align = CENTER;
  }

  draw() {
    var x;
    noStroke();
    //fill @bg
    //rect @x,@y,@w,@h*0.65
    if (this.align === LEFT) {
      x = this.x - 0.45 * this.w;
    } else {
      x = this.x;
    }
    //fill @fg
    push();
    textSize(2 * global.size()); // 0.4
    textAlign(this.align);
    noStroke();
    text(this.text, x, this.y + 0.05 * global.size());
    return pop();
  }

  inside(x, y) {
    param.Number(x);
    param.Number(y);
    return param.Boolean((this.x - this.w / 2 < x && x < this.x + this.w / 2) && (this.y - this.h / 2 < y && y < this.y + this.h / 2));
  }

};

export var ClockButton = class ClockButton extends Button {
  constructor(x, y, nr, onclick) {
    super(x, y, '', onclick);
    this.draw = this.draw.bind(this);
    this.drawClock = this.drawClock.bind(this);
    this.nr = nr;
    this.w = 2.6 * global.size();
    this.h = 4 * global.size();
    this.state = -1; // paused
  }

  draw() {
    boundMethodCheck(this, ClockButton);
    noStroke();
    push();
    textSize(2 * global.size());
    textAlign(this.align);
    noStroke();
    this.drawClock(0);
    this.drawClock(1);
    return pop();
  }

  drawClock(player) {
    var minuter, p, res, sekunder, t, timmar, x, y;
    boundMethodCheck(this, ClockButton);
    p = modulo(global.chess.history().length, 2);
    if (global.clocks[player] < 60) {
      fill("red");
    }
    noStroke();
    textSize(global.size());
    t = global.clocks[player];
    if (!global.paused && p !== player) {
      t -= 1 / 240;
    }
    global.clocks[player] = t;
    t = round(t);
    sekunder = modulo(t, 60);
    t = Math.floor(t / 60);
    if (sekunder < 10) {
      sekunder = "0" + sekunder;
    }
    minuter = modulo(t, 60);
    if (minuter < 10) {
      minuter = "0" + minuter;
    }
    timmar = Math.floor(t / 60);
    if (timmar > 0) {
      res = timmar + "h" + minuter;
    } else {
      res = minuter + ":" + sekunder;
    }
    this.bg = ['black', 'white'][player];
    if (p === player || global.paused) {
      this.bg = 'gray';
    }
    push();
    x = this.nr === 0 ? global.mx() / 2 : width - global.mx() / 2;
    y = global.size() * [8, 10][player];
    translate(x, y);
    if (this.nr === 1) {
      scale(-1, -1);
    }
    fill(this.bg);
    rect(0, 0, this.w, this.h * 0.2);
    fill(['white', 'black'][player]);
    text(res, 0, 0.1 * global.size());
    pop();
    push();
    y = global.size() * 9;
    translate(x, y);
    if (this.nr === 1) {
      scale(-1, -1);
    }
    fill('white');
    textSize(global.size() * 0.5);
    text(global.material, 0, 0); //[-global.size(),global.size()][player]
    return pop();
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnV0dG9uLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXGJ1dHRvbi5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUE7OztBQUFBLE9BQUE7RUFBUSxNQUFSO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVEsS0FBUjtFQUFjLEtBQWQ7Q0FBQSxNQUFBOztBQUVBLE9BQUEsSUFBYSxTQUFOLE1BQUEsT0FBQTtFQUNOLFdBQWEsR0FBQSxJQUFBLE9BQUEsVUFBQSxDQUFBO1FBT2IsQ0FBQSxXQUFBLENBQUE7UUFjQSxDQUFBLGFBQUEsQ0FBQTtJQXJCYyxJQUFDLENBQUE7SUFBRSxJQUFDLENBQUE7SUFBRSxJQUFDLENBQUE7SUFBSyxJQUFDLENBQUE7SUFDMUIsSUFBQyxDQUFBLENBQUQsR0FBSyxDQUFBLEdBQUksTUFBTSxDQUFDLElBQVAsQ0FBQTtJQUNULElBQUMsQ0FBQSxDQUFELEdBQUssQ0FBQSxHQUFJLE1BQU0sQ0FBQyxJQUFQLENBQUE7SUFDVCxJQUFDLENBQUEsRUFBRCxHQUFNO0lBQ04sSUFBQyxDQUFBLEVBQUQsR0FBTTtJQUNOLElBQUMsQ0FBQSxLQUFELEdBQVM7RUFMRzs7RUFPYixJQUFPLENBQUEsQ0FBQTtBQUNSLFFBQUE7SUFBRSxRQUFBLENBQUEsRUFBRjs7O0lBSUUsSUFBRyxJQUFDLENBQUEsS0FBRCxLQUFRLElBQVg7TUFBcUIsQ0FBQSxHQUFFLElBQUMsQ0FBQSxDQUFELEdBQUcsSUFBQSxHQUFLLElBQUMsQ0FBQSxFQUFoQztLQUFBLE1BQUE7TUFBdUMsQ0FBQSxHQUFFLElBQUMsQ0FBQSxFQUExQztLQUpGOztJQU1FLElBQUEsQ0FBQTtJQUNBLFFBQUEsQ0FBUyxDQUFBLEdBQUUsTUFBTSxDQUFDLElBQVAsQ0FBQSxDQUFYLEVBUEY7SUFRRSxTQUFBLENBQVUsSUFBQyxDQUFBLEtBQVg7SUFDQSxRQUFBLENBQUE7SUFDQSxJQUFBLENBQUssSUFBQyxDQUFBLElBQU4sRUFBWSxD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QUFBLENBQU0sQ0FBQyxDQUFQLEVBQVMsQ0FBQyxDQUFWLEVBQWY7O0lBQ0EsSUFBQSxDQUFLLE9BQUw7SUFDQSxRQUFBLENBQVMsTUFBTSxDQUFDLElBQVAsQ0FBQSxDQUFBLEdBQWMsR0FBdkI7SUFDQSxJQUFBLENBQUssTUFBTSxDQUFDLFFBQVosRUFBc0IsQ0FBdEIsRUFBd0IsQ0FBeEIsRUF0Q0Y7V0F1Q0UsR0FBQSxDQUFBO0VBeENXOztBQWpCTiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Z2xvYmFsfSBmcm9tICcuLi9qcy9nbG9iYWxzLmpzJ1xyXG5pbXBvcnQge3BhcmFtLHJhbmdlfSBmcm9tICcuLi9qcy91dGlscy5qcydcclxuXHJcbmV4cG9ydCBjbGFzcyBCdXR0b25cclxuXHRjb25zdHJ1Y3RvcjogKEB4LEB5LEB0ZXh0LEBvbmNsaWNrKSAtPlxyXG5cdFx0QHcgPSAzICogZ2xvYmFsLnNpemUoKVxyXG5cdFx0QGggPSA0ICogZ2xvYmFsLnNpemUoKVxyXG5cdFx0QGJnID0gJ2xpZ2h0Z3JheSdcclxuXHRcdEBmZyA9ICdibGFjaydcclxuXHRcdEBhbGlnbiA9IENFTlRFUlxyXG5cclxuXHRkcmF3IDogPT5cclxuXHRcdG5vU3Ryb2tlKClcclxuXHRcdCNmaWxsIEBiZ1xyXG5cdFx0I3JlY3QgQHgsQHksQHcsQGgqMC42NVxyXG5cclxuXHRcdGlmIEBhbGlnbj09TEVGVCB0aGVuIHg9QHgtMC40NSpAdyBlbHNlIHg9QHhcclxuXHRcdCNmaWxsIEBmZ1xyXG5cdFx0cHVzaCgpXHJcblx0XHR0ZXh0U2l6ZSAyKmdsb2JhbC5zaXplKCkgIyAwLjRcclxuXHRcdHRleHRBbGlnbiBAYWxpZ25cclxuXHRcdG5vU3Ryb2tlKClcclxuXHRcdHRleHQgQHRleHQsIHgsQHkrMC4wNSpnbG9iYWwuc2l6ZSgpXHJcblx0XHRwb3AoKVxyXG5cclxuXHRpbnNpZGUgOiAoeCx5KSA9PlxyXG5cdFx0cGFyYW0uTnVtYmVyIHhcclxuXHRcdHBhcmFtLk51bWJlciB5XHJcblx0XHRwYXJhbS5Cb29sZWFuIEB4LUB3LzIgPCB4IDwgQHgrQHcvMiBhbmQgQHktQGgvMiA8IHkgPCBAeStAaC8yXHJcblxyXG5leHBvcnQgY2xhc3MgQ2xvY2tCdXR0b24gZXh0ZW5kcyBCdXR0b25cclxuXHRjb25zdHJ1Y3RvcjogKHgseSxAbnIsb25jbGljaykgLT5cclxuXHRcdHN1cGVyIHgseSwnJyxvbmNsaWNrXHJcblx0XHRAdyA9IDIuNiAqIGdsb2JhbC5zaXplKClcclxuXHRcdEBoID0gNCAqIGdsb2JhbC5zaXplKClcclxuXHRcdEBzdGF0ZSA9IC0xICMgcGF1c2VkXHJcblxyXG5cdGRyYXcgOiA9PlxyXG5cdFx0bm9TdHJva2UoKVxyXG5cdFx0cHVzaCgpXHJcblx0XHR0ZXh0U2l6ZSAyKmdsb2JhbC5zaXplKClcclxuXHRcdHRleHRBbGlnbiBAYWxpZ25cclxuXHRcdG5vU3Ryb2tlKClcclxuXHRcdEBkcmF3Q2xvY2sgMFxyXG5cdFx0QGRyYXdDbG9jayAxXHJcblx0XHRwb3AoKVxyXG5cclxuXHRkcmF3Q2xvY2sgOiAocGxheWVyKSA9PlxyXG5cdFx0cCA9IGdsb2JhbC5jaGVzcy5oaXN0b3J5KCkubGVuZ3RoICUlIDJcclxuXHRcdGlmIGdsb2JhbC5jbG9ja3NbcGxheWVyXSA8IDYwIHRoZW4gZmlsbCBcInJlZFwiXHJcblx0XHRub1N0cm9rZSgpXHJcblx0XHR0ZXh0U2l6ZSBnbG9iYWwuc2l6ZSgpXHJcblx0XHR0ID0gZ2xvYmFsLmNsb2Nrc1twbGF5ZXJdXHJcblx0XHRpZiBub3QgZ2xvYmFsLnBhdXNlZCBhbmQgcCE9cGxheWVyXHJcblx0XHRcdHQgLT0gMS8yNDBcclxuXHRcdGdsb2JhbC5jbG9ja3NbcGxheWVyXSA9IHRcclxuXHRcdHQgPSByb3VuZCB0XHJcblx0XHRzZWt1bmRlciA9IHQgJSUgNjBcclxuXHRcdHQgPSB0IC8vIDYwXHJcblx0XHRpZiBzZWt1bmRlciA8IDEwIHRoZW4gc2VrdW5kZXIgPSBcIjBcIiArIHNla3VuZGVyXHJcblx0XHRtaW51dGVyID0gdCAlJSA2MFxyXG5cdFx0aWYgbWludXRlciA8IDEwIHRoZW4gbWludXRlciA9IFwiMFwiICsgbWludXRlclxyXG5cdFx0dGltbWFyID0gdCAvLyA2MFxyXG5cdFx0aWYgdGltbWFyID4gMCB0aGVuIHJlcyA9IHRpbW1hciArIFwiaFwiICsgbWludXRlclxyXG5cdFx0ZWxzZSByZXMgPSBtaW51dGVyICsgXCI6XCIgKyBzZWt1bmRlclxyXG5cclxuXHRcdEBiZyA9IFsnYmxhY2snLCd3aGl0ZSddW3BsYXllcl1cclxuXHRcdEBiZyA9ICdncmF5JyBpZiBwID09IHBsYXllciBvciBnbG9iYWwucGF1c2VkXHJcblxyXG5cdFx0cHVzaCgpXHJcblx0XHR4ID0gaWYgQG5yID09IDAgdGhlbiBnbG9iYWwubXgoKS8yIGVsc2Ugd2lkdGgtZ2xvYmFsLm14KCkvMlxyXG5cdFx0eSA9IGdsb2JhbC5zaXplKCkgKiBbOCwxMF1bcGxheWVyXVxyXG5cdFx0dHJhbnNsYXRlIHgsIHlcclxuXHRcdGlmIEBucj09MSB0aGVuIHNjYWxlIC0xLC0xXHJcblx0XHRmaWxsIEBiZ1xyXG5cdFx0cmVjdCAwLDAsQHcsQGgqMC4yXHJcblx0XHRmaWxsIFsnd2hpdGUnLCdibGFjayddW3BsYXllcl1cclxuXHRcdHRleHQgcmVzLCAwLDAuMSpnbG9iYWwuc2l6ZSgpXHJcblx0XHRwb3AoKVxyXG5cclxuXHRcdHB1c2goKVxyXG5cdFx0eSA9IGdsb2JhbC5zaXplKCkgKiA5XHJcblx0XHR0cmFuc2xhdGUgeCx5XHJcblx0XHRpZiBAbnI9PTEgdGhlbiBzY2FsZSAtMSwtMVxyXG5cdFx0ZmlsbCAnd2hpdGUnXHJcblx0XHR0ZXh0U2l6ZSBnbG9iYWwuc2l6ZSgpKjAuNVxyXG5cdFx0dGV4dCBnbG9iYWwubWF0ZXJpYWwsIDAsMCAjWy1nbG9iYWwuc2l6ZSgpLGdsb2JhbC5zaXplKCldW3BsYXllcl1cclxuXHRcdHBvcCgpXHJcblxyXG4iXX0=
//# sourceURL=c:\github\2023-026-chessx2\coffee\button.coffee